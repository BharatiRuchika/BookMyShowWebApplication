{"ast":null,"code":"var _jsxFileName = \"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/src/pages/signup1.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\"; // import FileUpload from 'FileUpoad';\n\nimport { connect } from 'react-redux';\nimport { selectedProfile, selectedName, selectedEmail, selectedMobile } from \"../Reducer/reducer\";\nimport validator from 'validator';\nimport axios from \"axios\";\nimport \"../App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Signup(props) {\n  _s();\n\n  const [Profile, setProfile] = useState(''); //    const [name,setname] = useState('');\n  //    const [email,setemail] = useState('');\n  //    const [password,setpassword] = useState('');\n  //    const [mobile,setmobile] = useState('');\n\n  const [admin, setadmin] = useState(false);\n  const [avatarPreview, setAvatarPreview] = useState(\"/images/default_avatar.jpg\");\n  const [state, setState] = React.useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    mobile: \"\",\n    errors: {\n      username: \"\",\n      email: \"\",\n      password: \"\",\n      mobile: \"\"\n    }\n  });\n  const History = useHistory();\n  const validEmailRegex = RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);\n\n  const signIn = () => {\n    var container = document.getElementById('container');\n    container.classList.remove(\"right-panel-active\");\n  };\n\n  const signUp = () => {\n    var container = document.getElementById('container');\n    container.classList.add(\"right-panel-active\");\n  };\n\n  const handleLogin = async e => {\n    console.log(\"handlelogin called\");\n    var email = state.email;\n    var password = state.password;\n    e.preventDefault();\n\n    if (email === \"\" || password === \"\") {\n      alert(\"enter email and password\");\n    }\n\n    if (admin == true) {\n      var res = await axios.post(\"https://book-my-show-web-application.vercel.app/admin/validateAdmin\", {\n        email,\n        password\n      });\n      console.log(\"res\", res);\n\n      if (res.data.error == \"Invalid Password\") {\n        alert(\"Invalid Password\");\n      } else if (res.data.error == \"admin doesnt exist\") {\n        alert(\"admin doesnt exist\");\n      } else if (res.data.authToken) {\n        props.selectedName(res.data.admin.name);\n        props.selectedProfile(res.data.admin.image);\n        props.selectedEmail(res.data.admin.email);\n        props.selectedMobile(res.data.admin.mobile);\n        localStorage.setItem(\"token\", res.data.authToken);\n        History.push({\n          pathname: \"/adminpage\"\n        });\n      }\n    } else {\n      var res = await axios.post(\"https://book-my-show-web-application.vercel.app/users/validateUser\", {\n        email,\n        password\n      });\n      console.log(\"res\", res);\n\n      if (res.data.error == \"Invalid Password\") {\n        alert(\"Invalid Password\");\n      } else if (res.data.error == \"user doesnt exist\") {\n        alert(\"user doesnt exist\");\n      } else if (res.data.authToken) {\n        props.selectedName(res.data.user.username);\n        props.selectedProfile(res.data.user.image);\n        props.selectedEmail(res.data.user.email);\n        props.selectedMobile(res.data.user.mobile);\n        localStorage.setItem(\"token\", res.data.authToken);\n        History.push(\"/homepage\");\n      }\n    }\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    console.log(\"target\", e.target);\n    const data = new FormData(e.target);\n    console.log(\"data\", data);\n    data.append('photo', Profile);\n    console.log(\"formdata\", data.get(\"email\"));\n    console.log(\"formdata\", data.get(\"photo\"));\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    const url = \"https://book-my-show-web-application.vercel.app/users/register\";\n    const res = await axios.post(url, data, config);\n    console.log(\"res\", res);\n\n    if (res.data.response) {\n      alert(\"user register successfully\");\n      var container = document.getElementById('container');\n      container.classList.remove(\"right-panel-active\"); //  history.push(\"/\");\n    } else {\n      alert(\"user already exist\");\n    }\n  };\n\n  const handleChange = async _ref => {\n    let {\n      target: {\n        name,\n        value\n      }\n    } = _ref;\n    console.log(\"handlechange called\");\n    console.log(\"value\", value);\n    let errors = state.errors;\n\n    switch (name) {\n      case \"username\":\n        {\n          if (value.length == 0) {\n            errors.username = \"name cant be empty\";\n          } else if (value.length < 5) {\n            errors.username = 'name should be atleast 5 charaters long';\n          } else {\n            errors.username = \"\";\n          }\n\n          break;\n        }\n\n      case \"email\":\n        {\n          if (value.length == 0) {\n            errors.email = \"email cant be empty\";\n          } else errors.email = validEmailRegex.test(value) ? '' : 'Email is not valid!';\n\n          break;\n        }\n\n      case \"mobile\":\n        {\n          if (value.length == 0) {\n            errors.mobile = \"Mobile Nunber cant be empty\";\n          } else errors.mobile = '';\n\n          break;\n        }\n\n      case \"password\":\n        {\n          if (value.length == 0) {\n            errors.password = \"password cant be empty\";\n          } else errors.password = validator.isStrongPassword(value, {\n            minLength: 8,\n            minLowercase: 1,\n            minUppercase: 1,\n            minNumbers: 1,\n            minSymbols: 1\n          }) ? '' : \"password is weak\";\n\n          break;\n        }\n    }\n\n    console.log(\"errors\", errors);\n    setState({ ...state,\n      [name]: value,\n      errors: errors\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        marginTop: \"80px\"\n      },\n      children: \"Movie Ticket Booking App\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-10 col-lg-5\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: \"\",\n          className: \"shadow-lg\",\n          encType: \"multipart/form-data\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"mb-3\",\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"email_field\",\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"name\",\n              id: \"name_field\",\n              className: \"form-control\",\n              name: \"name\",\n              value: name,\n              onChange: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"email_field\",\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              id: \"email_field\",\n              className: \"form-control\",\n              name: \"email\",\n              value: email // onChange={onChange}\n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"password_field\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              id: \"password_field\",\n              className: \"form-control\",\n              name: \"password\",\n              value: password // onChange={onChange}\n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"avatar_upload\",\n              children: \"Avatar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex align-items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"figure\", {\n                  className: \"avatar mr-3 item-rtl\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: avatarPreview,\n                    className: \"rounded-circle\",\n                    alt: \"Avatar Preview\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"custom-file\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  name: \"avatar\",\n                  className: \"custom-file-input\",\n                  id: \"customFile\",\n                  accept: \"images/*\" // onChange={onChange}\n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"custom-file-label\",\n                  htmlFor: \"customFile\",\n                  children: \"Choose Avatar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"register_button\",\n            type: \"submit\",\n            className: \"btn btn-block py-3\",\n            disabled: loading ? true : false,\n            children: \"REGISTER\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 3\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 6\n  }, this);\n}\n\n_s(Signup, \"Xo80arCApBZ9hSGcK+Tmtkot2jk=\", false, function () {\n  return [useHistory];\n});\n\n_c = Signup;\nexport default connect(null, {\n  selectedProfile,\n  selectedName,\n  selectedEmail,\n  selectedMobile\n})(Signup);\n\nvar _c;\n\n$RefreshReg$(_c, \"Signup\");","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/src/pages/signup1.js"],"names":["React","useState","useHistory","connect","selectedProfile","selectedName","selectedEmail","selectedMobile","validator","axios","Signup","props","Profile","setProfile","admin","setadmin","avatarPreview","setAvatarPreview","state","setState","username","email","password","mobile","errors","History","validEmailRegex","RegExp","signIn","container","document","getElementById","classList","remove","signUp","add","handleLogin","e","console","log","preventDefault","alert","res","post","data","error","authToken","name","image","localStorage","setItem","push","pathname","user","handleSubmit","target","FormData","append","get","config","headers","url","response","handleChange","value","length","test","isStrongPassword","minLength","minLowercase","minUppercase","minNumbers","minSymbols","marginTop","loading"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport {useHistory} from \"react-router-dom\";\n// import FileUpload from 'FileUpoad';\nimport { connect } from 'react-redux';\nimport {selectedProfile,selectedName,selectedEmail,selectedMobile} from \"../Reducer/reducer\";\nimport validator from 'validator'\nimport axios from \"axios\";\nimport \"../App.css\";\nfunction Signup(props){\n   const [Profile,setProfile] = useState('');\n//    const [name,setname] = useState('');\n//    const [email,setemail] = useState('');\n//    const [password,setpassword] = useState('');\n//    const [mobile,setmobile] = useState('');\n   const [admin,setadmin] = useState(false);\n   const [avatarPreview,setAvatarPreview] = useState(\"/images/default_avatar.jpg\");\n   const [state,setState] = React.useState({\n    username:\"\",\n    email:\"\",\n    password:\"\",\n    mobile:\"\",\n    errors:{\n      username:\"\",\n      email:\"\",\n      password:\"\",\n      mobile:\"\" \n    }\n  })\n   const History = useHistory();\n   const validEmailRegex = \n  RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);\n  const signIn = ()=>{\n    var container = document.getElementById('container');\n    container.classList.remove(\"right-panel-active\");\n  }\n  const signUp = ()=>{\n    var container = document.getElementById('container');\n    container.classList.add(\"right-panel-active\");\n  }\n  const handleLogin = async(e)=>{\n    console.log(\"handlelogin called\");\n    var email = state.email;\n    var password = state.password;\n    e.preventDefault();\n    if(email===\"\" || password===\"\"){\n      alert(\"enter email and password\");\n    }\n    \n   if(admin==true){\n     var res = await axios.post(\"https://book-my-show-web-application.vercel.app/admin/validateAdmin\",{\n       email,password\n     })\n     console.log(\"res\",res);\n     if(res.data.error==\"Invalid Password\"){\n       alert(\"Invalid Password\");\n     }else\n     if(res.data.error==\"admin doesnt exist\"){\n       alert(\"admin doesnt exist\");\n     }else\n     if(res.data.authToken){\n      props.selectedName(res.data.admin.name);\n      props.selectedProfile(res.data.admin.image);\n      props.selectedEmail(res.data.admin.email);\n      props.selectedMobile(res.data.admin.mobile);\n      localStorage.setItem(\"token\",res.data.authToken);\n      History.push({pathname:\"/adminpage\"});\n     }\n   }else{\nvar res = await axios.post(\"https://book-my-show-web-application.vercel.app/users/validateUser\",{\n  email,password\n})\nconsole.log(\"res\",res);\nif(res.data.error==\"Invalid Password\"){\n  alert(\"Invalid Password\");\n}else\nif(res.data.error==\"user doesnt exist\"){\n  alert(\"user doesnt exist\");\n}else\n  if(res.data.authToken){\n    props.selectedName(res.data.user.username);\n    props.selectedProfile(res.data.user.image);\n    props.selectedEmail(res.data.user.email);\n    props.selectedMobile(res.data.user.mobile);\n    localStorage.setItem(\"token\",res.data.authToken);\n    History.push(\"/homepage\");\n }\n}\n  }\n  const handleSubmit = async(e)=>{\n   e.preventDefault();\n   console.log(\"target\",e.target);\n   const data = new FormData(e.target);\n   console.log(\"data\",data);\n   data.append('photo',Profile);\n   console.log(\"formdata\",data.get(\"email\"));\n   console.log(\"formdata\",data.get(\"photo\"));\n   const config={\n     headers:{\n       'content-type':'multipart/form-data',\n      \n     }\n   }\n   const url = \"https://book-my-show-web-application.vercel.app/users/register\";\n   const res = await axios.post(url,data,config);\n   console.log(\"res\",res);\n   if(res.data.response){\n     alert(\"user register successfully\");\n     var container = document.getElementById('container');\n     container.classList.remove(\"right-panel-active\");\n    //  history.push(\"/\");\n   }else{\n     alert(\"user already exist\");\n   }\n }\n const handleChange = async({target:{name,value}})=>{\n    console.log(\"handlechange called\");\n    console.log(\"value\",value);\n    let errors = state.errors;\n   \n    switch(name){\n      case \"username\":{\n        if(value.length==0){\n          errors.username = \"name cant be empty\";\n        }else\n        if(value.length<5){\n          errors.username = 'name should be atleast 5 charaters long';\n        }else{\n          errors.username = \"\";\n        }\n        break;\n      }\n     \n      case \"email\":{\n        if(value.length==0){\n          errors.email = \"email cant be empty\";\n        }else\n        errors.email =  validEmailRegex.test(value)\n        ? ''\n        : 'Email is not valid!';\n        break;\n      }\n      case \"mobile\":{\n        if(value.length==0){\n          errors.mobile = \"Mobile Nunber cant be empty\";\n        }else\n        errors.mobile = '';\n        break;\n      }\n      case \"password\":{\n        if(value.length==0){\n          errors.password = \"password cant be empty\";\n        }else\n        errors.password = validator.isStrongPassword(value, {\n          minLength: 8, minLowercase: 1,\n          minUppercase: 1, minNumbers: 1, minSymbols: 1\n        })?'':\"password is weak\";\n     \n        break;\n      }\n    }\n    console.log(\"errors\",errors);\n    setState({...state,[name]:value,errors:errors});\n  }\n   return(\n     <div>\n        <h2 style={{marginTop:\"80px\"}}>Movie Ticket Booking App</h2>\n\n        <div className=\"row wrapper\">\n\t\t<div className=\"col-10 col-lg-5\">\n        <form onSubmit={\"\"} className=\"shadow-lg\" encType='multipart/form-data'>\n            <h1 className=\"mb-3\">Register</h1>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"email_field\">Name</label>\n            <input type=\"name\" id=\"name_field\" className=\"form-control\" name=\"name\" value={name} onChange={\"\"} />\n          </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"email_field\">Email</label>\n              <input\n                type=\"email\"\n                id=\"email_field\"\n                className=\"form-control\"\n                name=\"email\"\n                value={email}\n                // onChange={onChange}\n              />\n            </div>\n  \n            <div className=\"form-group\">\n              <label htmlFor=\"password_field\">Password</label>\n              <input\n                type=\"password\"\n                id=\"password_field\"\n                className=\"form-control\"\n                name=\"password\"\n                value={password}\n                // onChange={onChange}\n              />\n            </div>\n\n            <div className='form-group'>\n              <label htmlFor='avatar_upload'>Avatar</label>\n              <div className='d-flex align-items-center'>\n                  <div>\n                      <figure className='avatar mr-3 item-rtl'>\n                          <img\n                              src={avatarPreview}\n                              className='rounded-circle'\n                              alt='Avatar Preview'\n                            />\n                      </figure>\n                  </div>\n                  <div className='custom-file'>\n                      <input\n                          type='file'\n                          name='avatar'\n                          className='custom-file-input'\n                          id='customFile'\n                          accept=\"images/*\"\n                          // onChange={onChange}\n                      />\n                      <label className='custom-file-label' htmlFor='customFile'>\n                          Choose Avatar\n                      </label>\n                  </div>\n              </div>\n          </div>\n  \n            <button\n              id=\"register_button\"\n              type=\"submit\"\n              className=\"btn btn-block py-3\"\n              disabled={loading?true:false}\n            >\n              REGISTER\n            </button>\n          </form>\n\t\t  </div>\n          </div>\n         {/* <div class=\"container\" id=\"container\">\n         <div class=\"form-container sign-up-container\">\n             <form onSubmit={handleSubmit}>\n             <div>\n                \n                 </div> \n                 <h1>Create Account</h1>\n                 <div class=\"social-container\">\n                 \n                 </div> */}\n                 {/* <span>or use your email for registration</span>   */} \n                \n                 {/* <input type=\"file\" placeholder=\"Pick Image\" onChange={(e) => setProfile(e.target.files[0])} /> */}\n                 \n                 {/* <input type=\"text\" placeholder=\"name\" name=\"username\" id=\"name\"\n                 value={state.username} onChange={handleChange}/>\n                  <span style={{color:'red'}}>{state.errors.username}</span>\n                <input type=\"email\" placeholder=\"email\" name=\"email\" id=\"email\"\n                value={state.email} onChange={handleChange}/> \n                 <span style={{color:'red'}}>{state.errors.email}</span>\n                <input type=\"password\" placeholder=\"password\" name=\"password\" id=\"password\"\n               value={state.password} onChange={handleChange}/> \n                <span style={{color:'red'}}>{state.errors.password}</span>\n                 <input type=\"text\" placeholder=\"mobile\" name=\"mobile\" id=\"mobile\"\n                \n                  value={state.mobile} onChange={handleChange}/>\n                  <span style={{color:'red'}}>{state.errors.mobile}</span> */}\n                  \n                  \n                                {/* <div style = {{height:\"10px\"}}>\n                                    <figure className='avatar mr-3 item-rtl'>\n                                        <img\n                                            src={avatarPreview}\n                                            className='rounded-circle'\n                                            alt='Avatar Preview'\n                                        />\n                                    </figure>\n                                </div>\n                                <div className='custom-file'>\n                                    <input\n                                        type='file'\n                                        name='avatar'\n                                    className='custom-file-input'\n                                    id='customFile'\n                                    accept=\"image/*\" */}\n                                    {/* // onChange={onChange} */}\n                                    {/* />\n                                    <label className='custom-file-label' htmlFor='customFile'>\n                                        Choose Avatar\n                                </label>\n                                </div> */}\n                      \n                 {/* <button type=\"submit\">Sign Up</button> */}\n               \n             {/* </form> */}\n            \n         {/* </div>\n         <div class=\"form-container sign-in-container\">\n              <form>\n                  <h1>Sign in</h1>\n                 \n                  <span>or use your account</span>\n                  <input type=\"email\" name=\"email\" placeholder=\"email\" value={state.email} onChange={handleChange}></input>\n                  <span style={{color:'red'}}>{state.errors.email}</span>\n                  <input type=\"password\" name=\"password\" placeholder=\"password\" value={state.password} onChange={handleChange}></input>\n                \n                  <input type=\"checkbox\" style={{ marginLeft: \"-66%\", width: \"-webkit-fill-available\" }} value={admin} onChange={(e) => setadmin(true)} /><a href=\"#\" style={{ marginLeft: \"-8%\", marginTop: \"-8%\" }}>Pick If You Are Admin</a>\n                  <button onClick={handleLogin}>Sign In</button>\n              </form>\n         </div> */}\n\n          {/* <div class=\"overlay-container\">\n          <div class=\"overlay\">\n            <div class=\"overlay-panel overlay-left\">\n              <h1>Welcome Back!</h1>\n              <p>To keep connected with us please login with your personal info</p>\n              <button class=\"ghost\" id=\"signIn\" onClick={signIn}>Sign In</button>\n            </div>\n            <div class=\"overlay-panel overlay-right\">\n              <h1>Hello, Friend!</h1>\n              <p>Enter your personal details and start journey with us</p>\n              <button class=\"ghost\" id=\"signUp\" onClick={signUp}>Sign Up</button>\n            </div>\n          </div>\n        </div>\n      </div> */}\n</div>\n   )\n}\nexport default connect(null,{selectedProfile,selectedName,selectedEmail,selectedMobile})(Signup);\n"]},"metadata":{},"sourceType":"module"}