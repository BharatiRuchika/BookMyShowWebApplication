{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useHistory,useLocation,Link}from'react-router-dom';import'../profile.css';import TimePicker from'react-time-picker';import{connect}from'react-redux';// import fire from '../files/firebase';\nimport{useParams}from'react-router';import Button from'@mui/material/Button';import'../movie_details.css';import axios from\"axios\";import{ConstructionOutlined}from'@mui/icons-material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Movieupload=function Movieupload(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setimage=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),moviename=_useState4[0],setmoviename=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),ticketcost=_useState6[0],setticketcost=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),description=_useState8[0],setdescription=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),actorname=_useState10[0],setactorname=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),directorname=_useState12[0],setdirectorname=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),releasedate=_useState14[0],setreleasedate=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),outdate=_useState16[0],setoutdate=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),video=_useState18[0],setvideo=_useState18[1];var _useState19=useState('10:00'),_useState20=_slicedToArray(_useState19,2),value=_useState20[0],onChange=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),format=_useState22[0],setformat=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),next=_useState24[0],setnext=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),inputList=_useState26[0],setInputList=_useState26[1];var _useState27=useState([]),_useState28=_slicedToArray(_useState27,2),previousinputList=_useState28[0],setPreviousInputList=_useState28[1];var history=useHistory();var params=useParams();var profile=props.profile;var name=props.name;var email=props.email;var mobile=props.mobile;useEffect(function(){getMovie();},[]);useEffect(function(){console.log(\"inputList\",inputList);},[inputList]);function getMovie(){return _getMovie.apply(this,arguments);}function _getMovie(){_getMovie=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var token,id,res,movieId,showres;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:token=localStorage.getItem(\"token\");id=params.id;_context2.next=4;return axios.get(\" https://book-my-show-web-application.vercel.app/movies/getmovie/\".concat(id),{headers:{'auth-token':token}});case 4:res=_context2.sent;console.log(\"res\",res);if(!(res.status==200)){_context2.next=15;break;}movieId=res.data[0]._id;_context2.next=10;return axios.get(\" https://book-my-show-web-application.vercel.app/show/getshows/\".concat(movieId),{headers:{'auth-token':token}});case 10:showres=_context2.sent;console.log(\"showres\",showres);setInputList(showres.data);setPreviousInputList(showres.data);console.log(\"inputList\",inputList);case 15:setimage(res.data[0].movieimage);setmoviename(res.data[0].moviename);setticketcost(res.data[0].ticketcost);setdescription(res.data[0].description);setactorname(res.data[0].actorname);setdirectorname(res.data[0].directorname);setreleasedate(res.data[0].releasedate);setoutdate(res.data[0].outdate);setvideo(res.data[0].videourl);setformat(res.data[0].movieimage);case 25:case\"end\":return _context2.stop();}}},_callee2);}));return _getMovie.apply(this,arguments);}var showTimingUpload=function showTimingUpload(){console.log(\"upload time\");};var handleRemoveClick=function handleRemoveClick(index){var list=_toConsumableArray(inputList);list.splice(index,1);setInputList(list);};var handleAddClick=function handleAddClick(){setInputList([].concat(_toConsumableArray(inputList),[{}]));};var movieUpload=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var token,id,theaterId,res,movieId,showres;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=localStorage.getItem(\"token\");e.preventDefault();console.log(\"in[putList\",inputList.length);if(!(image===\"\"||video===\"\"||moviename===\"\"||description===\"\"||actorname===\"\"||directorname===\"\"||releasedate===\"\"||outdate===\"\",inputList.length<1)){_context.next=7;break;}alert(\"please fill all fields\");_context.next=22;break;case 7:id=params.id;theaterId=params.theaterId;_context.next=11;return axios.put(\" https://book-my-show-web-application.vercel.app/movies/editmovie\",{id:id,theaterId:theaterId,image:image,video:video,moviename:moviename,description:description,actorname:actorname,directorname:directorname,releasedate:releasedate,outdate:outdate,ticketcost:ticketcost},{headers:{'auth-token':token}});case 11:res=_context.sent;console.log(\"response\",res);if(!(res.status==200)){_context.next=22;break;}movieId=params.id;;// console.log(res.data.response._id);\nconsole.log(\"inpulist\",inputList);_context.next=19;return axios.put(\" https://book-my-show-web-application.vercel.app/show/editshows\",{inputList:inputList,movieId:movieId,previousinputList:previousinputList},{headers:{'auth-token':token}});case 19:showres=_context.sent;console.log(\"showres\",showres);if(showres.data===\"success\"){alert(\"Movie Updated Successfully\");history.push(\"/movie_theater_upload\");}case 22:case\"end\":return _context.stop();}}},_callee);}));return function movieUpload(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{class:\"form-container sign-in-container\",className:\"movie-container\",style:{height:'auto',left:'0',width:'max-content',zIndex:2,marginLeft:'33%',marginTop:'9%'},children:/*#__PURE__*/_jsxs(\"form\",{className:\"upload-form\",style:{background:'#f6f5f7',marginLeft:\"-50%\",marginTop:\"inherit\"},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"upload-font\",style:{fontWeight:\"bold\",background:\"#ff4b2b\",color:\"white\"},children:\"Upload Theater Movies\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"movie image url\",value:image,onChange:function onChange(e){return setimage(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"movie viedo url\",value:video,onChange:function onChange(e){return setvideo(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Movie name\",value:moviename,onChange:function onChange(e){return setmoviename(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Ticket Cost\",value:ticketcost,onChange:function onChange(e){return setticketcost(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Description\",value:description,onChange:function onChange(e){return setdescription(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Actor Name\",value:actorname,onChange:function onChange(e){return setactorname(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Director Name\",value:directorname,onChange:function onChange(e){console.log(e.target.value);setdirectorname(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{style:{color:\"black\"},children:\"Select Release Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"Pick release Date\",value:releasedate,onChange:function onChange(e){return setreleasedate(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{style:{color:\"black\"},children:\"Select Out Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"Pick out Date\",value:outdate,onChange:function onChange(e){return setoutdate(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{style:{color:\"black\"},children:\"Format\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"custom-select mb-2 mr-sm-2 mb-sm-0\",name:\"format\",placeholder:\"select format\",value:format,onChange:function onChange(e){return setformat(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"2d\",children:\"2D\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3d\",children:\"3D\"})]}),inputList.map(function(x,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsx(\"label\",{style:{color:\"black\",marginLeft:\"100px\"},children:\"Select Show's Times\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"From\"}),/*#__PURE__*/_jsx(TimePicker,{id:\"firststarttime\",inputReadOnly:true,showSecond:false,use24Hours:true,value:x.startTime,onChange:function onChange(value){console.log('New time is: ',value);var list=_toConsumableArray(inputList);list[i][\"startTime\"]=value;setInputList(list);}}),/*#__PURE__*/_jsx(\"b\",{children:\"To\"}),/*#__PURE__*/_jsx(TimePicker,{id:\"firststarttime\",inputReadOnly:true,showSecond:false,use24Hours:true,value:x.endTime,onChange:function onChange(value){console.log('New time is: ',value);var list=_toConsumableArray(inputList);list[i][\"endTime\"]=value;setInputList(list);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-box\",children:[inputList.length-1===i&&/*#__PURE__*/_jsx(\"button\",{onClick:handleAddClick,className:\"mr10\",children:\"Add\"}),inputList.length!==1&&/*#__PURE__*/_jsx(\"button\",{style:{marginLeft:\"10px\"},onClick:function onClick(){return handleRemoveClick(i);},children:\"Remove\"}),/*#__PURE__*/_jsx(\"br\",{})]})]});}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",style:{background:\"#ff4b2b\",color:\"white\",marginTop:\"10px\"},value:\"Update Movie\",onClick:movieUpload})]})});};function mapStateToProps(state){console.log(\"state\",state);return{name:state.name,email:state.email,password:state.password,mobile:state.mobile};}export default connect(mapStateToProps)(Movieupload);","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/src/admin/edit_movie.js"],"names":["React","useEffect","useState","useHistory","useLocation","Link","TimePicker","connect","useParams","Button","axios","ConstructionOutlined","Movieupload","props","image","setimage","moviename","setmoviename","ticketcost","setticketcost","description","setdescription","actorname","setactorname","directorname","setdirectorname","releasedate","setreleasedate","outdate","setoutdate","video","setvideo","value","onChange","format","setformat","next","setnext","inputList","setInputList","previousinputList","setPreviousInputList","history","params","profile","name","email","mobile","getMovie","console","log","token","localStorage","getItem","id","get","headers","res","status","movieId","data","_id","showres","movieimage","videourl","showTimingUpload","handleRemoveClick","index","list","splice","handleAddClick","movieUpload","e","preventDefault","length","alert","theaterId","put","push","height","left","width","zIndex","marginLeft","marginTop","background","fontWeight","color","target","map","x","i","startTime","endTime","mapStateToProps","state","password"],"mappings":"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","sourcesContent":["\n    import React, { useEffect, useState } from 'react'\n    import { useHistory, useLocation, Link } from 'react-router-dom';\n    import '../profile.css';\n    import TimePicker from 'react-time-picker';\n    \n    import { connect } from 'react-redux';\n    // import fire from '../files/firebase';\n    import { useParams } from 'react-router';\n    import Button from '@mui/material/Button';\n    import '../movie_details.css';\n    import axios from \"axios\";\nimport { ConstructionOutlined } from '@mui/icons-material';\n     const Movieupload = (props) => {\n        const [image, setimage] = useState('');\n        const [moviename, setmoviename] = useState('');\n        const [ticketcost, setticketcost] = useState('')\n        const [description, setdescription] = useState('');\n        const [actorname, setactorname] = useState('');\n        const [directorname, setdirectorname] = useState('');\n        const [releasedate, setreleasedate] = useState('');\n        const [outdate, setoutdate] = useState('');\n        const [video, setvideo] = useState('');\n        const [value, onChange] = useState('10:00');\n        const [format, setformat] = useState('');\n        const [next, setnext] = useState(false);\n        const [inputList, setInputList] = useState([]);\n        const [previousinputList, setPreviousInputList] = useState([]);\n        const history = useHistory();\n        const params = useParams();\n        const profile = props.profile;\n        const name = props.name;\n        const email = props.email;\n        const mobile = props.mobile;\n        useEffect(()=>{\n            getMovie();\n        },[])\n        useEffect(()=>{\n           console.log(\"inputList\",inputList);\n        },[inputList])\n      \n        async function getMovie(){\n            const token = localStorage.getItem(\"token\");\n              var id = params.id;\n              var res = await axios.get(` https://book-my-show-web-application.vercel.app/movies/getmovie/${id}`,{\n                  headers:{\n                      'auth-token':token\n                  }\n              });\n              console.log(\"res\",res);\n            if(res.status==200){\n                var movieId = res.data[0]._id;\n                var showres = await axios.get(` https://book-my-show-web-application.vercel.app/show/getshows/${movieId}`,{\n                    headers:{\n                        'auth-token':token\n                    }\n                });\n                console.log(\"showres\",showres);\n                 setInputList(showres.data);\n                 setPreviousInputList(showres.data);\n                console.log(\"inputList\",inputList);\n             }\n            setimage(res.data[0].movieimage);\n            setmoviename(res.data[0].moviename);\n            setticketcost(res.data[0].ticketcost);\n            setdescription(res.data[0].description);\n            setactorname(res.data[0].actorname);\n            setdirectorname(res.data[0].directorname);\n            setreleasedate(res.data[0].releasedate);\n            setoutdate(res.data[0].outdate);\n            setvideo(res.data[0].videourl);\n            setformat(res.data[0].movieimage);\n            }\n        const showTimingUpload = ()=>{\n            console.log(\"upload time\");\n        }\n        const handleRemoveClick = index => {\n            const list = [...inputList];\n            list.splice(index, 1);\n            setInputList(list);\n          };\n        \n          const handleAddClick = () => {\n            setInputList([...inputList,{}]);\n          };\n        const movieUpload = async(e) => {\n            const token = localStorage.getItem(\"token\");\n            e.preventDefault();\n            console.log(\"in[putList\",inputList.length);\n            if (image === \"\" || video === \"\" || moviename === \"\" || description === \"\" || actorname === \"\" || directorname === \"\" || releasedate === \"\" || outdate === \"\",inputList.length<1) {\n                alert(\"please fill all fields\");\n            } else {\n                var id = params.id;\n                var theaterId = params.theaterId\n                var res = await axios.put(\" https://book-my-show-web-application.vercel.app/movies/editmovie\",{\n                    id,theaterId,image,video,moviename,description,actorname,directorname,releasedate,outdate,ticketcost\n                },{\n                    headers:{\n                        'auth-token':token\n                    }\n                })\n                console.log(\"response\",res);\n                if(res.status==200){\n                    var movieId = params.id;;\n                    // console.log(res.data.response._id);\n                    console.log(\"inpulist\",inputList)\n                    var showres = await axios.put(\" https://book-my-show-web-application.vercel.app/show/editshows\",{\n                        inputList:inputList,movieId:movieId,previousinputList:previousinputList\n                    },{\n                        headers:{\n                            'auth-token':token\n                        }\n                    })\n                    console.log(\"showres\",showres);\n                    if(showres.data===\"success\"){\n                        alert(\"Movie Updated Successfully\");\n                        history.push(\"/movie_theater_upload\")\n                    }\n                }\n        }\n        }\n        return (\n        <div class=\"form-container sign-in-container\" className=\"movie-container\" style={{ height: 'auto', left: '0', width: 'max-content', zIndex: 2, marginLeft: '33%', marginTop: '9%' }}>\n                      \n        <form className=\"upload-form\" style={{ background: '#f6f5f7', marginLeft: \"-50%\", marginTop: \"inherit\" }}>\n        <h2 className=\"upload-font\" style={{ fontWeight: \"bold\", background: \"#ff4b2b\", color: \"white\" }}>Upload Theater Movies</h2>\n            <br />\n        <input type=\"text\" placeholder=\"movie image url\" value={image} onChange={(e) => setimage(e.target.value)} />\n         <input type=\"text\" placeholder=\"movie viedo url\" value={video} onChange={(e) => setvideo(e.target.value)} />\n         <input type=\"text\" placeholder=\"Movie name\" value={moviename} onChange={(e) => setmoviename(e.target.value)} />\n                                <input type=\"text\" placeholder=\"Ticket Cost\" value={ticketcost} onChange={(e) => setticketcost(e.target.value)} />\n                                <input type=\"text\" placeholder=\"Description\" value={description} onChange={(e) => setdescription(e.target.value)} />\n                                <input type=\"text\" placeholder=\"Actor Name\" value={actorname} onChange={(e) => setactorname(e.target.value)} />\n                                 <input type=\"text\" placeholder=\"Director Name\" value={directorname} onChange={(e) =>{\n                                    console.log(e.target.value);\n                                    setdirectorname(e.target.value)}} />\n                                <label style={{color:\"black\"}}>Select Release Date</label>\n                                <input type=\"date\" placeholder=\"Pick release Date\" value={releasedate} onChange={(e) => setreleasedate(e.target.value)} />\n                                <label style={{color:\"black\"}}>Select Out Date</label> \n                                \n                                 <input type=\"date\" placeholder=\"Pick out Date\" value={outdate} onChange={(e) => setoutdate(e.target.value)} />\n                             <label style={{color:\"black\"}}>Format</label>   \n                <select className=\"custom-select mb-2 mr-sm-2 mb-sm-0\" name=\"format\"placeholder=\"select format\" value={format} onChange={(e)=>setformat(e.target.value)}>\n                <option value=\"2d\">2D</option>\n                <option value=\"3d\">3D</option>\n                </select> \n                 {inputList.map((x, i) => {\n               return (<div className=\"box\">\n                <label style={{color:\"black\",marginLeft:\"100px\"}}>Select Show's Times</label><br/>\n               <b>From</b>\n                    <TimePicker\n                       id=\"firststarttime\"\n                       inputReadOnly\n                       showSecond={false}\n                       use24Hours\n                       value={x.startTime}\n                       onChange={(value) =>{ console.log('New time is: ', value)\n                       const list = [...inputList];\n                       list[i][\"startTime\"] = value;\n                       setInputList(list); \n                 }}\n                      />\n                      <b>To</b>\n                      <TimePicker\n                       id=\"firststarttime\"\n                       inputReadOnly\n                       showSecond={false}\n                       use24Hours\n                       value={x.endTime}\n                       onChange={(value) =>{ console.log('New time is: ', value)\n                       const list = [...inputList];\n                       list[i][\"endTime\"] = value; \n                        setInputList(list);\n                }}\n                      />\n                        <div className=\"btn-box\">\n                        {inputList.length - 1 === i && <button  onClick={handleAddClick} className=\"mr10\">Add</button>}\n                     {inputList.length !== 1 && <button\n                      style={{marginLeft:\"10px\"}} \n                       onClick={() => handleRemoveClick(i)}>Remove</button>}\n                   <br/> \n                    \n         </div>\n                    </div>\n                   \n                     );\n                    })}\n             <input type=\"button\" style={{ background: \"#ff4b2b\", color: \"white\",marginTop:\"10px\" }} value=\"Update Movie\" onClick={movieUpload} />\n                            </form>\n                       \n            </div>\n        )\n    }\n    function mapStateToProps(state) {\n            console.log(\"state\",state);\n            return {\n                name: state.name,\n                email:state.email,\n                password:state.password,\n                mobile:state.mobile\n            }\n        }\n    export default connect(mapStateToProps)(Movieupload);  "]},"metadata":{},"sourceType":"module"}