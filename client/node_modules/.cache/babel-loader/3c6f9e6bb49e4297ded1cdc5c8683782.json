{"ast":null,"code":"import _defineProperty from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";// import FileUpload from 'FileUpoad';\nimport{connect}from'react-redux';import{selectedProfile,selectedName,selectedEmail,selectedMobile}from\"../Reducer/reducer\";import validator from'validator';import axios from\"axios\";import\"../App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),Profile=_useState2[0],setProfile=_useState2[1];//    const [name,setname] = useState('');\n//    const [email,setemail] = useState('');\n//    const [password,setpassword] = useState('');\n//    const [mobile,setmobile] = useState('');\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),admin=_useState4[0],setadmin=_useState4[1];var _React$useState=React.useState({username:\"\",email:\"\",password:\"\",mobile:\"\",errors:{username:\"\",email:\"\",password:\"\",mobile:\"\"}}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var History=useHistory();var validEmailRegex=RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);var signIn=function signIn(){var container=document.getElementById('container');container.classList.remove(\"right-panel-active\");};var signUp=function signUp(){var container=document.getElementById('container');container.classList.add(\"right-panel-active\");};var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var email,password,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"handlelogin called\");email=state.email;password=state.password;e.preventDefault();if(email===\"\"||password===\"\"){alert(\"enter email and password\");}if(!(admin==true)){_context.next=13;break;}_context.next=8;return axios.post(\"https://book-my-show-web-application.vercel.app/admin/validateAdmin\",{email:email,password:password});case 8:res=_context.sent;console.log(\"res\",res);if(res.data.error==\"Invalid Password\"){alert(\"Invalid Password\");}else if(res.data.error==\"admin doesnt exist\"){alert(\"admin doesnt exist\");}else if(res.data.authToken){props.selectedName(res.data.admin.name);props.selectedProfile(res.data.admin.image);props.selectedEmail(res.data.admin.email);props.selectedMobile(res.data.admin.mobile);localStorage.setItem(\"token\",res.data.authToken);History.push({pathname:\"/adminpage\"});}_context.next=18;break;case 13:_context.next=15;return axios.post(\"https://book-my-show-web-application.vercel.app/users/validateUser\",{email:email,password:password});case 15:res=_context.sent;console.log(\"res\",res);if(res.data.error==\"Invalid Password\"){alert(\"Invalid Password\");}else if(res.data.error==\"user doesnt exist\"){alert(\"user doesnt exist\");}else if(res.data.authToken){props.selectedName(res.data.user.username);props.selectedProfile(res.data.user.image);props.selectedEmail(res.data.user.email);props.selectedMobile(res.data.user.mobile);localStorage.setItem(\"token\",res.data.authToken);History.push(\"/homepage\");}case 18:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var data,config,url,res,container;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();console.log(\"target\",e.target);data=new FormData(e.target);console.log(\"data\",data);data.append('photo',Profile);console.log(\"formdata\",data.get(\"email\"));console.log(\"formdata\",data.get(\"photo\"));config={headers:{'content-type':'multipart/form-data'}};url=\"https://book-my-show-web-application.vercel.app/users/register\";_context2.next=11;return axios.post(url,data,config);case 11:res=_context2.sent;console.log(\"res\",res);if(res.data.response){alert(\"user register successfully\");container=document.getElementById('container');container.classList.remove(\"right-panel-active\");//  history.push(\"/\");\n}else{alert(\"user already exist\");}case 14:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmit(_x2){return _ref2.apply(this,arguments);};}();var handleChange=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref3){var _objectSpread2;var _ref3$target,name,value,errors;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref3$target=_ref3.target,name=_ref3$target.name,value=_ref3$target.value;console.log(\"handlechange called\");console.log(\"value\",value);errors=state.errors;_context3.t0=name;_context3.next=_context3.t0===\"username\"?7:_context3.t0===\"email\"?9:_context3.t0===\"mobile\"?11:_context3.t0===\"password\"?13:15;break;case 7:if(value.length==0){errors.username=\"name cant be empty\";}else if(value.length<5){errors.username='name should be atleast 5 charaters long';}else{errors.username=\"\";}return _context3.abrupt(\"break\",15);case 9:if(value.length==0){errors.email=\"email cant be empty\";}else errors.email=validEmailRegex.test(value)?'':'Email is not valid!';return _context3.abrupt(\"break\",15);case 11:if(value.length==0){errors.mobile=\"Mobile Nunber cant be empty\";}else errors.mobile='';return _context3.abrupt(\"break\",15);case 13:if(value.length==0){errors.password=\"password cant be empty\";}else errors.password=validator.isStrongPassword(value,{minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1})?'':\"password is weak\";return _context3.abrupt(\"break\",15);case 15:console.log(\"errors\",errors);setState(_objectSpread(_objectSpread({},state),{},(_objectSpread2={},_defineProperty(_objectSpread2,name,value),_defineProperty(_objectSpread2,\"errors\",errors),_objectSpread2)));case 17:case\"end\":return _context3.stop();}}},_callee3);}));return function handleChange(_x3){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginTop:\"80px\"},children:\"Movie Ticket Booking App\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"container\",id:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"form-container sign-up-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Create Account\"}),/*#__PURE__*/_jsx(\"div\",{class:\"social-container\"}),/*#__PURE__*/_jsx(\"span\",{children:\"or use your email for registration\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",placeholder:\"Pick Image\",onChange:function onChange(e){return setProfile(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"name\",name:\"username\",id:\"name\",value:state.username,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:state.errors.username}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"email\",name:\"email\",id:\"email\",value:state.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:state.errors.email}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",name:\"password\",id:\"password\",value:state.password,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:state.errors.password}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"mobile\",name:\"mobile\",id:\"mobile\",value:state.mobile,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:state.errors.mobile}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sign Up\"})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-container sign-in-container\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign in\"}),/*#__PURE__*/_jsx(\"span\",{children:\"or use your account\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"email\",value:state.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:state.errors.email}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"password\",value:state.password,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",style:{marginLeft:\"-66%\",width:\"-webkit-fill-available\"},value:admin,onChange:function onChange(e){return setadmin(true);}}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",style:{marginLeft:\"-8%\",marginTop:\"-8%\"},children:\"Pick If You Are Admin\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,children:\"Sign In\"})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"overlay-container\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"overlay\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"overlay-panel overlay-left\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome Back!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"To keep connected with us please login with your personal info\"}),/*#__PURE__*/_jsx(\"button\",{class:\"ghost\",id:\"signIn\",onClick:signIn,children:\"Sign In\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"overlay-panel overlay-right\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Hello, Friend!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Enter your personal details and start journey with us\"}),/*#__PURE__*/_jsx(\"button\",{class:\"ghost\",id:\"signUp\",onClick:signUp,children:\"Sign Up\"})]})]})})]})]});}export default connect(null,{selectedProfile:selectedProfile,selectedName:selectedName,selectedEmail:selectedEmail,selectedMobile:selectedMobile})(Signup);","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/src/pages/signup1.js"],"names":["React","useState","useHistory","connect","selectedProfile","selectedName","selectedEmail","selectedMobile","validator","axios","Signup","props","Profile","setProfile","admin","setadmin","username","email","password","mobile","errors","state","setState","History","validEmailRegex","RegExp","signIn","container","document","getElementById","classList","remove","signUp","add","handleLogin","e","console","log","preventDefault","alert","post","res","data","error","authToken","name","image","localStorage","setItem","push","pathname","user","handleSubmit","target","FormData","append","get","config","headers","url","response","handleChange","value","length","test","isStrongPassword","minLength","minLowercase","minUppercase","minNumbers","minSymbols","marginTop","files","color","marginLeft","width"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport {useHistory} from \"react-router-dom\";\n// import FileUpload from 'FileUpoad';\nimport { connect } from 'react-redux';\nimport {selectedProfile,selectedName,selectedEmail,selectedMobile} from \"../Reducer/reducer\";\nimport validator from 'validator'\nimport axios from \"axios\";\nimport \"../App.css\";\nfunction Signup(props){\n   const [Profile,setProfile] = useState('');\n//    const [name,setname] = useState('');\n//    const [email,setemail] = useState('');\n//    const [password,setpassword] = useState('');\n//    const [mobile,setmobile] = useState('');\n   const [admin,setadmin] = useState(false);\n \n   const [state,setState] = React.useState({\n    username:\"\",\n    email:\"\",\n    password:\"\",\n    mobile:\"\",\n    errors:{\n      username:\"\",\n      email:\"\",\n      password:\"\",\n      mobile:\"\" \n    }\n  })\n   const History = useHistory();\n   const validEmailRegex = \n  RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);\n  const signIn = ()=>{\n    var container = document.getElementById('container');\n    container.classList.remove(\"right-panel-active\");\n  }\n  const signUp = ()=>{\n    var container = document.getElementById('container');\n    container.classList.add(\"right-panel-active\");\n  }\n  const handleLogin = async(e)=>{\n    console.log(\"handlelogin called\");\n    var email = state.email;\n    var password = state.password;\n    e.preventDefault();\n    if(email===\"\" || password===\"\"){\n      alert(\"enter email and password\");\n    }\n    \n   if(admin==true){\n     var res = await axios.post(\"https://book-my-show-web-application.vercel.app/admin/validateAdmin\",{\n       email,password\n     })\n     console.log(\"res\",res);\n     if(res.data.error==\"Invalid Password\"){\n       alert(\"Invalid Password\");\n     }else\n     if(res.data.error==\"admin doesnt exist\"){\n       alert(\"admin doesnt exist\");\n     }else\n     if(res.data.authToken){\n    \n      props.selectedName(res.data.admin.name);\n      props.selectedProfile(res.data.admin.image);\n      props.selectedEmail(res.data.admin.email);\n      props.selectedMobile(res.data.admin.mobile);\n      localStorage.setItem(\"token\",res.data.authToken);\n      History.push({pathname:\"/adminpage\"});\n     }\n   }else{\nvar res = await axios.post(\"https://book-my-show-web-application.vercel.app/users/validateUser\",{\n  email,password\n})\nconsole.log(\"res\",res);\nif(res.data.error==\"Invalid Password\"){\n  alert(\"Invalid Password\");\n}else\nif(res.data.error==\"user doesnt exist\"){\n  alert(\"user doesnt exist\");\n}else\n  if(res.data.authToken){\n    props.selectedName(res.data.user.username);\n    props.selectedProfile(res.data.user.image);\n    props.selectedEmail(res.data.user.email);\n    props.selectedMobile(res.data.user.mobile);\n    localStorage.setItem(\"token\",res.data.authToken);\n    History.push(\"/homepage\");\n }\n}\n  }\n  const handleSubmit = async(e)=>{\n   e.preventDefault();\n   console.log(\"target\",e.target);\n   const data = new FormData(e.target);\n   console.log(\"data\",data);\n   data.append('photo',Profile);\n   console.log(\"formdata\",data.get(\"email\"));\n   console.log(\"formdata\",data.get(\"photo\"));\n   const config={\n     headers:{\n       'content-type':'multipart/form-data'\n     }\n   }\n   const url = \"https://book-my-show-web-application.vercel.app/users/register\";\n   const res = await axios.post(url,data,config);\n   console.log(\"res\",res);\n   if(res.data.response){\n     alert(\"user register successfully\");\n     var container = document.getElementById('container');\n     container.classList.remove(\"right-panel-active\");\n    //  history.push(\"/\");\n   }else{\n     alert(\"user already exist\");\n   }\n }\n const handleChange = async({target:{name,value}})=>{\n    console.log(\"handlechange called\");\n    console.log(\"value\",value);\n    let errors = state.errors;\n   \n    switch(name){\n      case \"username\":{\n        if(value.length==0){\n          errors.username = \"name cant be empty\";\n        }else\n        if(value.length<5){\n          errors.username = 'name should be atleast 5 charaters long';\n        }else{\n          errors.username = \"\";\n        }\n        break;\n      }\n     \n      case \"email\":{\n        if(value.length==0){\n          errors.email = \"email cant be empty\";\n        }else\n        errors.email =  validEmailRegex.test(value)\n        ? ''\n        : 'Email is not valid!';\n        break;\n      }\n      case \"mobile\":{\n        if(value.length==0){\n          errors.mobile = \"Mobile Nunber cant be empty\";\n        }else\n        errors.mobile = '';\n        break;\n      }\n      case \"password\":{\n        if(value.length==0){\n          errors.password = \"password cant be empty\";\n        }else\n        errors.password = validator.isStrongPassword(value, {\n          minLength: 8, minLowercase: 1,\n          minUppercase: 1, minNumbers: 1, minSymbols: 1\n        })?'':\"password is weak\";\n     \n        break;\n      }\n    }\n    console.log(\"errors\",errors);\n    setState({...state,[name]:value,errors:errors});\n  }\n   return(\n     <div>\n         <h2 style={{marginTop:\"80px\"}}>Movie Ticket Booking App</h2>\n         <div class=\"container\" id=\"container\">\n         <div class=\"form-container sign-up-container\">\n             <form onSubmit={handleSubmit}>\n             <div>\n                \n                 </div> \n                 <h1>Create Account</h1>\n                 <div class=\"social-container\">\n                 \n                 </div>\n                 <span>or use your email for registration</span>  \n                \n                 <input type=\"file\" placeholder=\"Pick Image\" onChange={(e) => setProfile(e.target.files[0])} />\n                 \n                 <input type=\"text\" placeholder=\"name\" name=\"username\" id=\"name\"\n                 value={state.username} onChange={handleChange}/>\n                  <span style={{color:'red'}}>{state.errors.username}</span>\n                <input type=\"email\" placeholder=\"email\" name=\"email\" id=\"email\"\n                value={state.email} onChange={handleChange}/> \n                 <span style={{color:'red'}}>{state.errors.email}</span>\n                <input type=\"password\" placeholder=\"password\" name=\"password\" id=\"password\"\n               value={state.password} onChange={handleChange}/> \n                <span style={{color:'red'}}>{state.errors.password}</span>\n                 <input type=\"text\" placeholder=\"mobile\" name=\"mobile\" id=\"mobile\"\n                \n                  value={state.mobile} onChange={handleChange}/>\n                  <span style={{color:'red'}}>{state.errors.mobile}</span>\n                 \n                 <button type=\"submit\">Sign Up</button>\n               \n             </form>\n            \n         </div>\n         <div class=\"form-container sign-in-container\">\n              <form>\n                  <h1>Sign in</h1>\n                 \n                  <span>or use your account</span>\n                  <input type=\"email\" name=\"email\" placeholder=\"email\" value={state.email} onChange={handleChange}></input>\n                  <span style={{color:'red'}}>{state.errors.email}</span>\n                  <input type=\"password\" name=\"password\" placeholder=\"password\" value={state.password} onChange={handleChange}></input>\n                \n                  <input type=\"checkbox\" style={{ marginLeft: \"-66%\", width: \"-webkit-fill-available\" }} value={admin} onChange={(e) => setadmin(true)} /><a href=\"#\" style={{ marginLeft: \"-8%\", marginTop: \"-8%\" }}>Pick If You Are Admin</a>\n                  <button onClick={handleLogin}>Sign In</button>\n              </form>\n         </div>\n\n          <div class=\"overlay-container\">\n          <div class=\"overlay\">\n            <div class=\"overlay-panel overlay-left\">\n              <h1>Welcome Back!</h1>\n              <p>To keep connected with us please login with your personal info</p>\n              <button class=\"ghost\" id=\"signIn\" onClick={signIn}>Sign In</button>\n            </div>\n            <div class=\"overlay-panel overlay-right\">\n              <h1>Hello, Friend!</h1>\n              <p>Enter your personal details and start journey with us</p>\n              <button class=\"ghost\" id=\"signUp\" onClick={signUp}>Sign Up</button>\n            </div>\n          </div>\n        </div>\n      </div>\n</div>\n   )\n}\nexport default connect(null,{selectedProfile,selectedName,selectedEmail,selectedMobile})(Signup);\n"]},"metadata":{},"sourceType":"module"}