{"ast":null,"code":"import _defineProperty from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";// import FileUpload from 'FileUpoad';\nimport{connect}from'react-redux';import{selectedProfile,selectedName,selectedEmail,selectedMobile,selectedUser}from\"../Reducer/reducer\";import validator from'validator';import axios from\"axios\";import\"../App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),Profile=_useState2[0],setProfile=_useState2[1];//    const [name,setname] = useState('');\n//    const [email,setemail] = useState('');\n//    const [password,setpassword] = useState('');\n//    const [mobile,setmobile] = useState('');\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),admin=_useState4[0],setadmin=_useState4[1];var _useState5=useState(\"/images/default_avatar.jpg\"),_useState6=_slicedToArray(_useState5,2),avatarPreview=_useState6[0],setAvatarPreview=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),avatar=_useState8[0],setAvatar=_useState8[1];var _useState9=useState({username:\"\",email:\"\",password:\"\",mobile:\"\"}),_useState10=_slicedToArray(_useState9,2),user=_useState10[0],setUser=_useState10[1];var _useState11=useState({username:\"\",email:\"\",password:\"\",mobile:\"\"}),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];var username=user.username,email=user.email,password=user.password,mobile=user.mobile;var History=useHistory();var validEmailRegex=RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);var signIn=function signIn(){console.log(\"im in signin\");var container=document.getElementById('container');container.classList.remove(\"right-panel-active\");};var signUp=function signUp(){var container=document.getElementById('container');container.classList.add(\"right-panel-active\");};var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var email,password,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"handlelogin called\");e.preventDefault();email=user.email;password=user.password;console.log('email',email);console.log('password',password);if(email===\"\"||password===\"\"){alert(\"enter email and password\");}if(!(admin==true)){_context.next=15;break;}_context.next=10;return axios.post(\"https://book-my-show-web-application.vercel.app/admin/validateAdmin\",{email:email,password:password});case 10:res=_context.sent;console.log(\"res\",res);if(res.data.error==\"Invalid Password\"){alert(\"Invalid Password\");}else if(res.data.error==\"admin doesnt exist\"){alert(\"admin doesnt exist\");}else if(res.data.authToken){props.selectedName(res.data.admin.name);props.selectedProfile(res.data.admin.image);props.selectedEmail(res.data.admin.email);props.selectedMobile(res.data.admin.mobile);props.selectedUser(res.data.admin);localStorage.setItem(\"token\",res.data.authToken);History.push({pathname:\"/adminpage\"});}_context.next=20;break;case 15:_context.next=17;return axios.post(\"https://book-my-show-web-application.vercel.app/users/validateUser\",{email:email,password:password});case 17:res=_context.sent;console.log(\"res\",res);if(res.data.error==\"Invalid Password\"){alert(\"Invalid Password\");}else if(res.data.error==\"user doesnt exist\"){alert(\"user doesnt exist\");}else if(res.data.authToken){props.selectedName(res.data.user.username);props.selectedProfile(res.data.user.image);props.selectedEmail(res.data.user.email);props.selectedMobile(res.data.user.mobile);props.selectedUser(res.data.user);localStorage.setItem(\"token\",res.data.authToken);History.push(\"/homepage\");}case 20:case\"end\":return _context.stop();}}},_callee);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var formData,data,config,res,container;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();console.log(\"avatarPreview\",avatarPreview);formData=new FormData();formData.set(\"avatar\",avatarPreview);formData.set(\"username\",username);formData.set(\"email\",email);formData.set(\"password\",password);formData.set(\"mobile\",mobile);// dispatch(register(formData))\ndata={username:username,email:email,password:password,mobile:mobile,avatar:avatarPreview};config={headers:{\"Content-Type\":\"multipart/form-data\"}};_context2.next=12;return axios.post(\"https://book-my-show-web-application.vercel.app/users/register\",formData,config);case 12:res=_context2.sent;//  const url = \"http://localhost:3001/users/register\";\n//  const res = await axios.post(url,data,config);\nconsole.log(\"res\",res);if(res.status==200){alert(\"user register successfully\");container=document.getElementById('container');container.classList.remove(\"right-panel-active\");}else{alert(\"user already exist\");}case 15:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmit(_x2){return _ref2.apply(this,arguments);};}();var handleChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var reader;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(\"handlechange called\");console.log(\"value\",e.target.value);_context3.t0=e.target.name;_context3.next=_context3.t0===\"username\"?5:_context3.t0===\"email\"?7:_context3.t0===\"mobile\"?9:_context3.t0===\"password\"?11:13;break;case 5:if(e.target.value.length==0){error.username=\"name cant be empty\";}else if(e.target.value.length<5){error.username='name should be atleast 5 charaters long';}else{error.username=\"\";}return _context3.abrupt(\"break\",13);case 7:if(e.target.value.length==0){error.email=\"email cant be empty\";}else error.email=validEmailRegex.test(e.target.value)?'':'Email is not valid!';return _context3.abrupt(\"break\",13);case 9:if(e.target.value.length==0){error.mobile=\"Mobile Nunber cant be empty\";}else error.mobile='';return _context3.abrupt(\"break\",13);case 11:if(e.target.value.length==0){error.password=\"password cant be empty\";}else error.password=validator.isStrongPassword(e.target.value,{minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1})?'':\"password is weak\";return _context3.abrupt(\"break\",13);case 13:if(e.target.name===\"avatar\"){console.log(\"im in avatar\");reader=new FileReader();console.log(\"image\",e.target.files[0]);reader.readAsDataURL(e.target.files[0]);reader.onload=function(){if(reader.readyState==2){setAvatarPreview(reader.result);setAvatar(reader.result);}};}else{setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));setError({error:error});}case 14:case\"end\":return _context3.stop();}}},_callee3);}));return function handleChange(_x3){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginTop:\"80px\"},children:\"Movie Ticket Booking App\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"container\",id:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"form-container sign-up-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Create Account\"}),/*#__PURE__*/_jsx(\"div\",{class:\"social-container\"}),/*#__PURE__*/_jsx(\"span\",{children:\"or use your email for registration\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"name\",name:\"username\",id:\"name\",value:username,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:error.username}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"email\",name:\"email\",id:\"email\",value:email,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:error.email}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",name:\"password\",id:\"password\",value:password,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:error.password}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"mobile\",name:\"mobile\",id:\"mobile\",value:mobile,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:error.mobile}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label\",htmlFor:\"customFile\",children:\"Choose Avatar\"}),/*#__PURE__*/_jsx(\"div\",{className:\"custom-file\",children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",className:\"custom-file-input\",id:\"customFile\",accept:\"image/*\",onChange:handleChange})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sign Up\"})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"form-container sign-in-container\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign in\"}),/*#__PURE__*/_jsx(\"span\",{children:\"or use your account\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"email\",value:email,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:error.email}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"password\",value:password,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",style:{marginLeft:\"-66%\",width:\"-webkit-fill-available\"},value:admin,onChange:function onChange(e){return setadmin(true);}}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",style:{marginLeft:\"-8%\",marginTop:\"-8%\"},children:\"Pick If You Are Admin\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogin,children:\"Sign In\"})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"overlay-container\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"overlay\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"overlay-panel overlay-left\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome Back!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"To keep connected with us please login with your personal info\"}),/*#__PURE__*/_jsx(\"button\",{class:\"ghost\",id:\"signIn\",onClick:signIn,children:\"Sign In\"})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"overlay-panel overlay-right\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Hello, Friend!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Enter your personal details and start journey with us\"}),/*#__PURE__*/_jsx(\"button\",{class:\"ghost\",id:\"signUp\",onClick:signUp,children:\"Sign Up\"})]})]})})]})]});}export default connect(null,{selectedProfile:selectedProfile,selectedName:selectedName,selectedEmail:selectedEmail,selectedMobile:selectedMobile,selectedUser:selectedUser})(Signup);","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/src/pages/signup1.js"],"names":["React","useState","useHistory","connect","selectedProfile","selectedName","selectedEmail","selectedMobile","selectedUser","validator","axios","Signup","props","Profile","setProfile","admin","setadmin","avatarPreview","setAvatarPreview","avatar","setAvatar","username","email","password","mobile","user","setUser","error","setError","History","validEmailRegex","RegExp","signIn","console","log","container","document","getElementById","classList","remove","signUp","add","handleLogin","e","preventDefault","alert","post","res","data","authToken","name","image","localStorage","setItem","push","pathname","handleSubmit","formData","FormData","set","config","headers","status","handleChange","target","value","length","test","isStrongPassword","minLength","minLowercase","minUppercase","minNumbers","minSymbols","reader","FileReader","files","readAsDataURL","onload","readyState","result","marginTop","color","marginLeft","width"],"mappings":"20BAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA;AACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAAQC,eAAR,CAAwBC,YAAxB,CAAqCC,aAArC,CAAmDC,cAAnD,CAAkEC,YAAlE,KAAqF,oBAArF,CACA,MAAOC,CAAAA,SAAP,KAAsB,WAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,YAAP,C,wFACA,QAASC,CAAAA,MAAT,CAAgBC,KAAhB,CAAsB,CACnB,cAA6BX,QAAQ,CAAC,EAAD,CAArC,wCAAOY,OAAP,eAAeC,UAAf,eACH;AACA;AACA;AACA;AACG,eAAyBb,QAAQ,CAAC,KAAD,CAAjC,yCAAOc,KAAP,eAAaC,QAAb,eACA,eAAyCf,QAAQ,CAAC,4BAAD,CAAjD,yCAAOgB,aAAP,eAAqBC,gBAArB,eACC,eAA2BjB,QAAQ,CAAC,EAAD,CAAnC,yCAAOkB,MAAP,eAAcC,SAAd,eACA,eAAuBnB,QAAQ,CAAC,CAC9BoB,QAAQ,CAAC,EADqB,CAE9BC,KAAK,CAAC,EAFwB,CAG9BC,QAAQ,CAAC,EAHqB,CAI9BC,MAAM,CAAC,EAJuB,CAAD,CAA/B,0CAAOC,IAAP,gBAAYC,OAAZ,gBAMF,gBAAyBzB,QAAQ,CAAC,CAC9BoB,QAAQ,CAAC,EADqB,CAE9BC,KAAK,CAAC,EAFwB,CAG9BC,QAAQ,CAAC,EAHqB,CAI9BC,MAAM,CAAC,EAJuB,CAAD,CAAjC,2CAAOG,KAAP,gBAAaC,QAAb,gBAMA,GAAOP,CAAAA,QAAP,CAAyCI,IAAzC,CAAOJ,QAAP,CAAgBC,KAAhB,CAAyCG,IAAzC,CAAgBH,KAAhB,CAAsBC,QAAtB,CAAyCE,IAAzC,CAAsBF,QAAtB,CAA+BC,MAA/B,CAAyCC,IAAzC,CAA+BD,MAA/B,CACC,GAAMK,CAAAA,OAAO,CAAG3B,UAAU,EAA1B,CACA,GAAM4B,CAAAA,eAAe,CACtBC,MAAM,CAAC,wHAAD,CADL,CAED,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAI,CACjBC,OAAO,CAACC,GAAR,CAAY,cAAZ,EACA,GAAIC,CAAAA,SAAS,CAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAhB,CACAF,SAAS,CAACG,SAAV,CAAoBC,MAApB,CAA2B,oBAA3B,EACD,CAJD,CAKA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAI,CACjB,GAAIL,CAAAA,SAAS,CAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAhB,CACAF,SAAS,CAACG,SAAV,CAAoBG,GAApB,CAAwB,oBAAxB,EACD,CAHD,CAIA,GAAMC,CAAAA,WAAW,0FAAG,iBAAMC,CAAN,yIAClBV,OAAO,CAACC,GAAR,CAAY,oBAAZ,EACAS,CAAC,CAACC,cAAF,GACItB,KAHc,CAGNG,IAAI,CAACH,KAHC,CAIdC,QAJc,CAIHE,IAAI,CAACF,QAJF,CAKlBU,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAoBZ,KAApB,EACAW,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAuBX,QAAvB,EACA,GAAGD,KAAK,GAAG,EAAR,EAAcC,QAAQ,GAAG,EAA5B,CAA+B,CAC7BsB,KAAK,CAAC,0BAAD,CAAL,CACD,CATiB,KAWhB9B,KAAK,EAAE,IAXS,kDAYDL,CAAAA,KAAK,CAACoC,IAAN,CAAW,qEAAX,CAAiF,CAC/FxB,KAAK,CAALA,KAD+F,CACzFC,QAAQ,CAARA,QADyF,CAAjF,CAZC,SAYbwB,GAZa,eAejBd,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAkBa,GAAlB,EACA,GAAGA,GAAG,CAACC,IAAJ,CAASrB,KAAT,EAAgB,kBAAnB,CAAsC,CACpCkB,KAAK,CAAC,kBAAD,CAAL,CACD,CAFD,IAGA,IAAGE,GAAG,CAACC,IAAJ,CAASrB,KAAT,EAAgB,oBAAnB,CAAwC,CACtCkB,KAAK,CAAC,oBAAD,CAAL,CACD,CAFD,IAGA,IAAGE,GAAG,CAACC,IAAJ,CAASC,SAAZ,CAAsB,CACrBrC,KAAK,CAACP,YAAN,CAAmB0C,GAAG,CAACC,IAAJ,CAASjC,KAAT,CAAemC,IAAlC,EACAtC,KAAK,CAACR,eAAN,CAAsB2C,GAAG,CAACC,IAAJ,CAASjC,KAAT,CAAeoC,KAArC,EACAvC,KAAK,CAACN,aAAN,CAAoByC,GAAG,CAACC,IAAJ,CAASjC,KAAT,CAAeO,KAAnC,EACAV,KAAK,CAACL,cAAN,CAAqBwC,GAAG,CAACC,IAAJ,CAASjC,KAAT,CAAeS,MAApC,EACAZ,KAAK,CAACJ,YAAN,CAAmBuC,GAAG,CAACC,IAAJ,CAASjC,KAA5B,EACAqC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA6BN,GAAG,CAACC,IAAJ,CAASC,SAAtC,EACApB,OAAO,CAACyB,IAAR,CAAa,CAACC,QAAQ,CAAC,YAAV,CAAb,EACA,CA9BgB,sDAgCN7C,CAAAA,KAAK,CAACoC,IAAN,CAAW,oEAAX,CAAgF,CAC9FxB,KAAK,CAALA,KAD8F,CACxFC,QAAQ,CAARA,QADwF,CAAhF,CAhCM,SAgClBwB,GAhCkB,eAmCtBd,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAkBa,GAAlB,EACA,GAAGA,GAAG,CAACC,IAAJ,CAASrB,KAAT,EAAgB,kBAAnB,CAAsC,CACpCkB,KAAK,CAAC,kBAAD,CAAL,CACD,CAFD,IAGA,IAAGE,GAAG,CAACC,IAAJ,CAASrB,KAAT,EAAgB,mBAAnB,CAAuC,CACrCkB,KAAK,CAAC,mBAAD,CAAL,CACD,CAFD,IAGE,IAAGE,GAAG,CAACC,IAAJ,CAASC,SAAZ,CAAsB,CACpBrC,KAAK,CAACP,YAAN,CAAmB0C,GAAG,CAACC,IAAJ,CAASvB,IAAT,CAAcJ,QAAjC,EACAT,KAAK,CAACR,eAAN,CAAsB2C,GAAG,CAACC,IAAJ,CAASvB,IAAT,CAAc0B,KAApC,EACAvC,KAAK,CAACN,aAAN,CAAoByC,GAAG,CAACC,IAAJ,CAASvB,IAAT,CAAcH,KAAlC,EACAV,KAAK,CAACL,cAAN,CAAqBwC,GAAG,CAACC,IAAJ,CAASvB,IAAT,CAAcD,MAAnC,EACAZ,KAAK,CAACJ,YAAN,CAAmBuC,GAAG,CAACC,IAAJ,CAASvB,IAA5B,EACA2B,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA6BN,GAAG,CAACC,IAAJ,CAASC,SAAtC,EACApB,OAAO,CAACyB,IAAR,CAAa,WAAb,EACF,CAlDoB,uDAAH,kBAAXZ,CAAAA,WAAW,4CAAjB,CAqDA,GAAMc,CAAAA,YAAY,2FAAG,kBAAMb,CAAN,6JACnBA,CAAC,CAACC,cAAF,GACAX,OAAO,CAACC,GAAR,CAAY,eAAZ,CAA4BjB,aAA5B,EACQwC,QAHW,CAGA,GAAIC,CAAAA,QAAJ,EAHA,CAIjBD,QAAQ,CAACE,GAAT,CAAa,QAAb,CAAsB1C,aAAtB,EACAwC,QAAQ,CAACE,GAAT,CAAa,UAAb,CAAwBtC,QAAxB,EACAoC,QAAQ,CAACE,GAAT,CAAa,OAAb,CAAqBrC,KAArB,EACAmC,QAAQ,CAACE,GAAT,CAAa,UAAb,CAAwBpC,QAAxB,EACAkC,QAAQ,CAACE,GAAT,CAAa,QAAb,CAAsBnC,MAAtB,EACA;AACGwB,IAVc,CAUP,CACZ3B,QAAQ,CAARA,QADY,CAEZC,KAAK,CAALA,KAFY,CAGZC,QAAQ,CAARA,QAHY,CAIZC,MAAM,CAANA,MAJY,CAKZL,MAAM,CAACF,aALK,CAVO,CAkBd2C,MAlBc,CAkBP,CACZC,OAAO,CAAE,CAAE,eAAgB,qBAAlB,CADG,CAlBO,yBAqBFnD,CAAAA,KAAK,CAACoC,IAAN,CAAW,gEAAX,CAA4EW,QAA5E,CAAqFG,MAArF,CArBE,SAqBdb,GArBc,gBAsBrB;AACA;AACCd,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAkBa,GAAlB,EACA,GAAGA,GAAG,CAACe,MAAJ,EAAY,GAAf,CAAmB,CACjBjB,KAAK,CAAC,4BAAD,CAAL,CACIV,SAFa,CAEDC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAFC,CAGjBF,SAAS,CAACG,SAAV,CAAoBC,MAApB,CAA2B,oBAA3B,EAED,CALD,IAKK,CACHM,KAAK,CAAC,oBAAD,CAAL,CACD,CAhCmB,yDAAH,kBAAZW,CAAAA,YAAY,8CAAlB,CAkCD,GAAMO,CAAAA,YAAY,2FAAG,kBAAMpB,CAAN,iIAClBV,OAAO,CAACC,GAAR,CAAY,qBAAZ,EACAD,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAoBS,CAAC,CAACqB,MAAF,CAASC,KAA7B,EAFkB,aAGXtB,CAAC,CAACqB,MAAF,CAASd,IAHE,+BAIX,UAJW,kBAeX,OAfW,kBAwBX,QAxBW,kBA+BX,UA/BW,oBAKd,GAAGP,CAAC,CAACqB,MAAF,CAASC,KAAT,CAAeC,MAAf,EAAuB,CAA1B,CAA4B,CAC1BvC,KAAK,CAACN,QAAN,CAAiB,oBAAjB,CACD,CAFD,IAGA,IAAGsB,CAAC,CAACqB,MAAF,CAASC,KAAT,CAAeC,MAAf,CAAsB,CAAzB,CAA2B,CACzBvC,KAAK,CAACN,QAAN,CAAiB,yCAAjB,CACD,CAFD,IAEK,CACHM,KAAK,CAACN,QAAN,CAAiB,EAAjB,CACD,CAZa,2CAgBd,GAAGsB,CAAC,CAACqB,MAAF,CAASC,KAAT,CAAeC,MAAf,EAAuB,CAA1B,CAA4B,CAC1BvC,KAAK,CAACL,KAAN,CAAc,qBAAd,CACD,CAFD,IAGAK,CAAAA,KAAK,CAACL,KAAN,CAAeQ,eAAe,CAACqC,IAAhB,CAAqBxB,CAAC,CAACqB,MAAF,CAASC,KAA9B,EACb,EADa,CAEb,qBAFF,CAnBc,2CAyBd,GAAGtB,CAAC,CAACqB,MAAF,CAASC,KAAT,CAAeC,MAAf,EAAuB,CAA1B,CAA4B,CAC1BvC,KAAK,CAACH,MAAN,CAAe,6BAAf,CACD,CAFD,IAGAG,CAAAA,KAAK,CAACH,MAAN,CAAe,EAAf,CA5Bc,4CAgCd,GAAGmB,CAAC,CAACqB,MAAF,CAASC,KAAT,CAAeC,MAAf,EAAuB,CAA1B,CAA4B,CAC1BvC,KAAK,CAACJ,QAAN,CAAiB,wBAAjB,CACD,CAFD,IAGAI,CAAAA,KAAK,CAACJ,QAAN,CAAiBd,SAAS,CAAC2D,gBAAV,CAA2BzB,CAAC,CAACqB,MAAF,CAASC,KAApC,CAA2C,CAC1DI,SAAS,CAAE,CAD+C,CAC5CC,YAAY,CAAE,CAD8B,CAE1DC,YAAY,CAAE,CAF4C,CAEzCC,UAAU,CAAE,CAF6B,CAE1BC,UAAU,CAAE,CAFc,CAA3C,EAGd,EAHc,CAGX,kBAHN,CAnCc,4CA0ClB,GAAG9B,CAAC,CAACqB,MAAF,CAASd,IAAT,GAAkB,QAArB,CAA8B,CAC5BjB,OAAO,CAACC,GAAR,CAAY,cAAZ,EACMwC,MAFsB,CAEb,GAAIC,CAAAA,UAAJ,EAFa,CAG5B1C,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAoBS,CAAC,CAACqB,MAAF,CAASY,KAAT,CAAe,CAAf,CAApB,EACAF,MAAM,CAACG,aAAP,CAAqBlC,CAAC,CAACqB,MAAF,CAASY,KAAT,CAAe,CAAf,CAArB,EACAF,MAAM,CAACI,MAAP,CAAgB,UAAI,CAChB,GAAGJ,MAAM,CAACK,UAAP,EAAqB,CAAxB,CAA0B,CACtB7D,gBAAgB,CAACwD,MAAM,CAACM,MAAR,CAAhB,CACA5D,SAAS,CAACsD,MAAM,CAACM,MAAR,CAAT,CACH,CACJ,CALD,CAMD,CAXD,IAWK,CACLtD,OAAO,gCAAKD,IAAL,wBAAWkB,CAAC,CAACqB,MAAF,CAASd,IAApB,CAA0BP,CAAC,CAACqB,MAAF,CAASC,KAAnC,GAAP,CACArC,QAAQ,CAAC,CAACD,KAAK,CAALA,KAAD,CAAD,CAAR,CACD,CAxDmB,yDAAH,kBAAZoC,CAAAA,YAAY,8CAAlB,CA0DE,mBACE,oCACI,WAAI,KAAK,CAAE,CAACkB,SAAS,CAAC,MAAX,CAAX,sCADJ,cAEI,aAAK,KAAK,CAAC,WAAX,CAAuB,EAAE,CAAC,WAA1B,wBACA,YAAK,KAAK,CAAC,kCAAX,uBACI,cAAM,QAAQ,CAAEzB,YAAhB,CAA8B,OAAO,CAAC,qBAAtC,wBACA,cADA,cAII,sCAJJ,cAKI,YAAK,KAAK,CAAC,kBAAX,EALJ,cAQI,4DARJ,cAYI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,MAA/B,CAAsC,IAAI,CAAC,UAA3C,CAAsD,EAAE,CAAC,MAAzD,CACA,KAAK,CAAEnC,QADP,CACiB,QAAQ,CAAE0C,YAD3B,EAZJ,cAeK,aAAM,KAAK,CAAE,CAACmB,KAAK,CAAC,KAAP,CAAb,UAA6BvD,KAAK,CAACN,QAAnC,EAfL,cAgBG,cAAO,IAAI,CAAC,OAAZ,CAAoB,WAAW,CAAC,OAAhC,CAAwC,IAAI,CAAC,OAA7C,CAAqD,EAAE,CAAC,OAAxD,CACA,KAAK,CAAEC,KADP,CACc,QAAQ,CAAEyC,YADxB,EAhBH,cAkBI,aAAM,KAAK,CAAE,CAACmB,KAAK,CAAC,KAAP,CAAb,UAA6BvD,KAAK,CAACL,KAAnC,EAlBJ,cAmBG,cAAO,IAAI,CAAC,UAAZ,CAAuB,WAAW,CAAC,UAAnC,CAA8C,IAAI,CAAC,UAAnD,CAA8D,EAAE,CAAC,UAAjE,CACD,KAAK,CAAEC,QADN,CACgB,QAAQ,CAAEwC,YAD1B,EAnBH,cAqBG,aAAM,KAAK,CAAE,CAACmB,KAAK,CAAC,KAAP,CAAb,UAA6BvD,KAAK,CAACJ,QAAnC,EArBH,cAsBI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,QAA/B,CAAwC,IAAI,CAAC,QAA7C,CAAsD,EAAE,CAAC,QAAzD,CAEC,KAAK,CAAEC,MAFR,CAEgB,QAAQ,CAAEuC,YAF1B,EAtBJ,cAyBK,aAAM,KAAK,CAAE,CAACmB,KAAK,CAAC,KAAP,CAAb,UAA6BvD,KAAK,CAACH,MAAnC,EAzBL,cA2BmB,cAAO,SAAS,CAAC,mBAAjB,CAAqC,OAAO,CAAC,YAA7C,2BA3BnB,cA8BmB,YAAK,SAAS,CAAC,aAAf,uBACI,cACI,IAAI,CAAC,MADT,CAEI,IAAI,CAAC,QAFT,CAGA,SAAS,CAAC,mBAHV,CAIA,EAAE,CAAC,YAJH,CAKA,MAAM,CAAC,SALP,CAMA,QAAQ,CAAEuC,YANV,EADJ,EA9BnB,cA0CI,eAAQ,IAAI,CAAC,QAAb,qBA1CJ,GADJ,EADA,cAiDA,YAAK,KAAK,CAAC,kCAAX,uBACK,qCACI,+BADJ,cAGI,6CAHJ,cAII,cAAO,IAAI,CAAC,OAAZ,CAAoB,IAAI,CAAC,OAAzB,CAAiC,WAAW,CAAC,OAA7C,CAAqD,KAAK,CAAEzC,KAA5D,CAAmE,QAAQ,CAAEyC,YAA7E,EAJJ,cAKI,aAAM,KAAK,CAAE,CAACmB,KAAK,CAAC,KAAP,CAAb,UAA6BvD,KAAK,CAACL,KAAnC,EALJ,cAMI,cAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,UAA5B,CAAuC,WAAW,CAAC,UAAnD,CAA8D,KAAK,CAAEC,QAArE,CAA+E,QAAQ,CAAEwC,YAAzF,EANJ,cAQI,cAAO,IAAI,CAAC,UAAZ,CAAuB,KAAK,CAAE,CAAEoB,UAAU,CAAE,MAAd,CAAsBC,KAAK,CAAE,wBAA7B,CAA9B,CAAuF,KAAK,CAAErE,KAA9F,CAAqG,QAAQ,CAAE,kBAAC4B,CAAD,QAAO3B,CAAAA,QAAQ,CAAC,IAAD,CAAf,EAA/G,EARJ,cAQ4I,UAAG,IAAI,CAAC,GAAR,CAAY,KAAK,CAAE,CAAEmE,UAAU,CAAE,KAAd,CAAqBF,SAAS,CAAE,KAAhC,CAAnB,mCAR5I,cASI,eAAQ,OAAO,CAAEvC,WAAjB,qBATJ,GADL,EAjDA,cA+DC,YAAK,KAAK,CAAC,mBAAX,uBACA,aAAK,KAAK,CAAC,SAAX,wBACE,aAAK,KAAK,CAAC,4BAAX,wBACE,qCADF,cAEE,qFAFF,cAGE,eAAQ,KAAK,CAAC,OAAd,CAAsB,EAAE,CAAC,QAAzB,CAAkC,OAAO,CAAEV,MAA3C,qBAHF,GADF,cAME,aAAK,KAAK,CAAC,6BAAX,wBACE,sCADF,cAEE,4EAFF,cAGE,eAAQ,KAAK,CAAC,OAAd,CAAsB,EAAE,CAAC,QAAzB,CAAkC,OAAO,CAAEQ,MAA3C,qBAHF,GANF,GADA,EA/DD,GAFJ,GADF,CAmFF,CACD,cAAerC,CAAAA,OAAO,CAAC,IAAD,CAAM,CAACC,eAAe,CAAfA,eAAD,CAAiBC,YAAY,CAAZA,YAAjB,CAA8BC,aAAa,CAAbA,aAA9B,CAA4CC,cAAc,CAAdA,cAA5C,CAA2DC,YAAY,CAAZA,YAA3D,CAAN,CAAP,CAAuFG,MAAvF,CAAf","sourcesContent":["import React, { useState } from \"react\";\nimport {useHistory} from \"react-router-dom\";\n// import FileUpload from 'FileUpoad';\nimport { connect } from 'react-redux';\nimport {selectedProfile,selectedName,selectedEmail,selectedMobile,selectedUser} from \"../Reducer/reducer\";\nimport validator from 'validator'\nimport axios from \"axios\";\nimport \"../App.css\";\nfunction Signup(props){\n   const [Profile,setProfile] = useState('');\n//    const [name,setname] = useState('');\n//    const [email,setemail] = useState('');\n//    const [password,setpassword] = useState('');\n//    const [mobile,setmobile] = useState('');\n   const [admin,setadmin] = useState(false);\n   const [avatarPreview,setAvatarPreview] = useState(\"/images/default_avatar.jpg\");\n    const [avatar,setAvatar] = useState(\"\");\n    const [user,setUser] = useState({\n      username:\"\",\n      email:\"\",\n      password:\"\",\n      mobile:\"\",\n  })\n  const [error,setError] = useState({\n      username:\"\",\n      email:\"\",\n      password:\"\",\n      mobile:\"\" \n  })\n  const {username,email,password,mobile} = user;\n   const History = useHistory();\n   const validEmailRegex = \n  RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);\n  const signIn = ()=>{\n    console.log(\"im in signin\");\n    var container = document.getElementById('container');\n    container.classList.remove(\"right-panel-active\");\n  }\n  const signUp = ()=>{\n    var container = document.getElementById('container');\n    container.classList.add(\"right-panel-active\");\n  }\n  const handleLogin = async(e)=>{\n    console.log(\"handlelogin called\");\n    e.preventDefault();\n    var email = user.email;\n    var password = user.password;\n    console.log('email',email);\n    console.log('password',password);\n    if(email===\"\" || password===\"\"){\n      alert(\"enter email and password\");\n    }\n    \n   if(admin==true){\n     var res = await axios.post(\"https://book-my-show-web-application.vercel.app/admin/validateAdmin\",{\n       email,password\n     })\n     console.log(\"res\",res);\n     if(res.data.error==\"Invalid Password\"){\n       alert(\"Invalid Password\");\n     }else\n     if(res.data.error==\"admin doesnt exist\"){\n       alert(\"admin doesnt exist\");\n     }else\n     if(res.data.authToken){\n      props.selectedName(res.data.admin.name);\n      props.selectedProfile(res.data.admin.image);\n      props.selectedEmail(res.data.admin.email);\n      props.selectedMobile(res.data.admin.mobile);\n      props.selectedUser(res.data.admin)\n      localStorage.setItem(\"token\",res.data.authToken);\n      History.push({pathname:\"/adminpage\"});\n     }\n   }else{\nvar res = await axios.post(\"https://book-my-show-web-application.vercel.app/users/validateUser\",{\n  email,password\n})\nconsole.log(\"res\",res);\nif(res.data.error==\"Invalid Password\"){\n  alert(\"Invalid Password\");\n}else\nif(res.data.error==\"user doesnt exist\"){\n  alert(\"user doesnt exist\");\n}else\n  if(res.data.authToken){\n    props.selectedName(res.data.user.username);\n    props.selectedProfile(res.data.user.image);\n    props.selectedEmail(res.data.user.email);\n    props.selectedMobile(res.data.user.mobile);\n    props.selectedUser(res.data.user)\n    localStorage.setItem(\"token\",res.data.authToken);\n    History.push(\"/homepage\");\n }\n}\n  }\n  const handleSubmit = async(e)=>{\n    e.preventDefault();\n    console.log(\"avatarPreview\",avatarPreview)\n      const formData = new FormData();\n      formData.set(\"avatar\",avatarPreview);\n      formData.set(\"username\",username);\n      formData.set(\"email\",email);\n      formData.set(\"password\",password);\n      formData.set(\"mobile\",mobile);\n      // dispatch(register(formData))\n   const data = {\n    username,\n    email,\n    password,\n    mobile,\n    avatar:avatarPreview\n   }\n  \n   const config={\n    headers: { \"Content-Type\": \"multipart/form-data\" },\n    }\n   const res = await axios.post(\"https://book-my-show-web-application.vercel.app/users/register\",formData,config)\n  //  const url = \"http://localhost:3001/users/register\";\n  //  const res = await axios.post(url,data,config);\n   console.log(\"res\",res);\n   if(res.status==200){\n     alert(\"user register successfully\");\n     var container = document.getElementById('container');\n     container.classList.remove(\"right-panel-active\");\n   \n   }else{\n     alert(\"user already exist\");\n   }\n }\n const handleChange = async(e)=>{\n    console.log(\"handlechange called\");\n    console.log(\"value\",e.target.value);\n    switch(e.target.name){\n      case \"username\":{\n        if(e.target.value.length==0){\n          error.username = \"name cant be empty\";\n        }else\n        if(e.target.value.length<5){\n          error.username = 'name should be atleast 5 charaters long';\n        }else{\n          error.username = \"\";\n        }\n        break;\n      }\n      case \"email\":{\n        if(e.target.value.length==0){\n          error.email = \"email cant be empty\";\n        }else\n        error.email =  validEmailRegex.test(e.target.value)\n        ? ''\n        : 'Email is not valid!';\n        break;\n      }\n      case \"mobile\":{\n        if(e.target.value.length==0){\n          error.mobile = \"Mobile Nunber cant be empty\";\n        }else\n        error.mobile = '';\n        break;\n      }\n      case \"password\":{\n        if(e.target.value.length==0){\n          error.password = \"password cant be empty\";\n        }else\n        error.password = validator.isStrongPassword(e.target.value, {\n          minLength: 8, minLowercase: 1,\n          minUppercase: 1, minNumbers: 1, minSymbols: 1\n        })?'':\"password is weak\";\n        break;\n      }\n    }\n    if(e.target.name === \"avatar\"){\n      console.log(\"im in avatar\");\n      const reader = new FileReader();\n      console.log(\"image\",e.target.files[0])\n      reader.readAsDataURL(e.target.files[0]);\n      reader.onload = ()=>{\n          if(reader.readyState == 2){\n              setAvatarPreview(reader.result);\n              setAvatar(reader.result);\n          }\n      }\n    }else{\n    setUser({...user,[e.target.name]:e.target.value});\n    setError({error})\n  }\n}\n   return(\n     <div>\n         <h2 style={{marginTop:\"80px\"}}>Movie Ticket Booking App</h2>\n         <div class=\"container\" id=\"container\">\n         <div class=\"form-container sign-up-container\">\n             <form onSubmit={handleSubmit} encType='multipart/form-data'>\n             <div>\n                \n                 </div> \n                 <h1>Create Account</h1>\n                 <div class=\"social-container\">\n                 \n                 </div>\n                 <span>or use your email for registration</span>  \n                \n                 {/* <input type=\"file\" placeholder=\"Pick Image\" onChange={(e) => setProfile(e.target.files[0])} /> */}\n                 \n                 <input type=\"text\" placeholder=\"name\" name=\"username\" id=\"name\"\n                 value={username} onChange={handleChange}/>\n\n                  <span style={{color:'red'}}>{error.username}</span>\n                <input type=\"email\" placeholder=\"email\" name=\"email\" id=\"email\"\n                value={email} onChange={handleChange}/> \n                 <span style={{color:'red'}}>{error.email}</span>\n                <input type=\"password\" placeholder=\"password\" name=\"password\" id=\"password\"\n               value={password} onChange={handleChange}/> \n                <span style={{color:'red'}}>{error.password}</span>\n                 <input type=\"text\" placeholder=\"mobile\" name=\"mobile\" id=\"mobile\"\n                \n                  value={mobile} onChange={handleChange}/>\n                  <span style={{color:'red'}}>{error.mobile}</span>\n                  \n                                <label className='custom-file-label' htmlFor='customFile'>\n                                        Choose Avatar\n                                </label>\n                                <div className='custom-file'>\n                                    <input\n                                        type='file'\n                                        name='avatar'\n                                    className='custom-file-input'\n                                    id='customFile'\n                                    accept=\"image/*\"\n                                    onChange={handleChange}\n                                    />\n                                    \n                                </div>\n                      \n                 <button type=\"submit\">Sign Up</button>\n               \n             </form>\n            \n         </div>\n         <div class=\"form-container sign-in-container\">\n              <form>\n                  <h1>Sign in</h1>\n                 \n                  <span>or use your account</span>\n                  <input type=\"email\" name=\"email\" placeholder=\"email\" value={email} onChange={handleChange}></input>\n                  <span style={{color:'red'}}>{error.email}</span>\n                  <input type=\"password\" name=\"password\" placeholder=\"password\" value={password} onChange={handleChange}></input>\n                \n                  <input type=\"checkbox\" style={{ marginLeft: \"-66%\", width: \"-webkit-fill-available\" }} value={admin} onChange={(e) => setadmin(true)} /><a href=\"#\" style={{ marginLeft: \"-8%\", marginTop: \"-8%\" }}>Pick If You Are Admin</a>\n                  <button onClick={handleLogin}>Sign In</button>\n              </form>\n         </div>\n\n          <div class=\"overlay-container\">\n          <div class=\"overlay\">\n            <div class=\"overlay-panel overlay-left\">\n              <h1>Welcome Back!</h1>\n              <p>To keep connected with us please login with your personal info</p>\n              <button class=\"ghost\" id=\"signIn\" onClick={signIn}>Sign In</button>\n            </div>\n            <div class=\"overlay-panel overlay-right\">\n              <h1>Hello, Friend!</h1>\n              <p>Enter your personal details and start journey with us</p>\n              <button class=\"ghost\" id=\"signUp\" onClick={signUp}>Sign Up</button>\n            </div>\n          </div>\n        </div>\n      </div>\n</div>\n   )\n}\nexport default connect(null,{selectedProfile,selectedName,selectedEmail,selectedMobile,selectedUser})(Signup);\n"]},"metadata":{},"sourceType":"module"}