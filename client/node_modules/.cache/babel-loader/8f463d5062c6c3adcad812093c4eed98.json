{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import*as React from'react';import Table from'@mui/material/Table';import TableBody from'@mui/material/TableBody';import TableCell from'@mui/material/TableCell';import TableContainer from'@mui/material/TableContainer';import TableHead from'@mui/material/TableHead';import TableRow from'@mui/material/TableRow';import Paper from'@mui/material/Paper';import{useEffect,useState}from\"react\";import{useHistory}from'react-router';import{useParams}from'react-router';import axios from'axios';// function createData(name, calories, fat, carbs, protein) {\n//   return { name, calories, fat, carbs, protein };\n// }\n// const rows = [\n//   createData('Frozen yoghurt', 159, 6.0, 24, 4.0),\n//   createData('Ice cream sandwich', 237, 9.0, 37, 4.3),\n//   createData('Eclair', 262, 16.0, 24, 6.0),\n//   createData('Cupcake', 305, 3.7, 67, 4.3),\n//   createData('Gingerbread', 356, 16.0, 49, 3.9),\n// ];\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Bookings(){var params=useParams();var history=useHistory();var token=localStorage.getItem(\"token\");var _useState=useState([]),_useState2=_slicedToArray(_useState,2),shows=_useState2[0],setShows=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];useEffect(function(){getUsers();},[]);var getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var id,movie_name,show_res,users;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=params.id;movie_name=params.moviename;_context.next=4;return axios.get(\"https://bookmyshowback.herokuapp.com/show/getshows/\".concat(id),{headers:{'auth-token':token}});case 4:show_res=_context.sent;console.log(\"res\",show_res);setShows(show_res.data);_context.next=9;return axios.get(\"https://bookmyshowback.herokuapp.com/movies/getuserbookings/\".concat(movie_name),{headers:{'auth-token':token}});case 9:users=_context.sent;console.log(\"users\",users);setUsers(users.data);case 12:case\"end\":return _context.stop();}}},_callee);}));return function getUsers(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:\"red\",marginLeft:\"300px\",marginTop:'30vh',marginBottom:\"20px\"},children:\"User Bookings\"}),shows.map(function(show){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"20px\",fontWeight:\"bold\"},children:show.startTime}),\"-\",/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"20px\",fontWeight:\"bold\"},children:show.endTime}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{sx:{minWidth:650},\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"UserName\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Mobile\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Movie Name\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Booking Date\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Movie Watchers\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Ceat Names\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Total Cost\"})]})}),users.map(function(user){if(user.show==show.startTime){return/*#__PURE__*/_jsx(TableBody,{children:/*#__PURE__*/_jsxs(TableRow,{sx:{'&:last-child td, &:last-child th':{border:0}},children:[/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",children:user.username}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:user.mobile}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:user.moviename}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:user.bookingdate}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:user.moviewatchers}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:user.ceatnames}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:/*#__PURE__*/_jsxs(\"b\",{children:[\"$\",user.totalcost]})})]},user._id)});}})]})})]});}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",style:{width:\"200px\",marginLeft:\"300px\"},onClick:function onClick(){history.push(\"/adminpage\");},value:\"Back\",id:\"con-select\"})]});}","map":{"version":3,"sources":["/Users/ruchikaashokbharati/Documents/Projects/BookMyShow/Book_My_Show_Back-main/client/src/admin/bookings.js"],"names":["React","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","useEffect","useState","useHistory","useParams","axios","Bookings","params","history","token","localStorage","getItem","shows","setShows","users","setUsers","getUsers","id","movie_name","moviename","get","headers","show_res","console","log","data","color","marginLeft","marginTop","marginBottom","map","show","fontSize","fontWeight","startTime","endTime","minWidth","user","border","username","mobile","bookingdate","moviewatchers","ceatnames","totalcost","_id","width","push"],"mappings":"wfAAA,MAAO,GAAKA,CAAAA,KAAZ,KAAuB,OAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAOC,CAAAA,cAAP,KAA2B,8BAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,OAAQC,SAAR,CAAkBC,QAAlB,KAAiC,OAAjC,CACA,OAASC,UAAT,KAA2B,cAA3B,CACA,OAASC,SAAT,KAA0B,cAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;6IAEA,cAAe,SAASC,CAAAA,QAAT,EAAoB,CAC/B,GAAIC,CAAAA,MAAM,CAAGH,SAAS,EAAtB,CACA,GAAII,CAAAA,OAAO,CAAGL,UAAU,EAAxB,CACA,GAAMM,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,cAAyBT,QAAQ,CAAC,EAAD,CAAjC,wCAAOU,KAAP,eAAaC,QAAb,eACA,eAAyBX,QAAQ,CAAC,EAAD,CAAjC,yCAAOY,KAAP,eAAaC,QAAb,eACAd,SAAS,CAAC,UAAI,CACXe,QAAQ,GACV,CAFQ,CAEP,EAFO,CAAT,CAGA,GAAMA,CAAAA,QAAQ,0FAAG,oKACXC,EADW,CACNV,MAAM,CAACU,EADD,CAEXC,UAFW,CAEEX,MAAM,CAACY,SAFT,uBAGMd,CAAAA,KAAK,CAACe,GAAN,8DAAgEH,EAAhE,EAAqE,CACxFI,OAAO,CAAC,CACN,aAAaZ,KADP,CADgF,CAArE,CAHN,QAGXa,QAHW,eAQfC,OAAO,CAACC,GAAR,CAAY,KAAZ,CAAkBF,QAAlB,EACAT,QAAQ,CAACS,QAAQ,CAACG,IAAV,CAAR,CATe,sBAUGpB,CAAAA,KAAK,CAACe,GAAN,uEAAyEF,UAAzE,EAAsF,CACtGG,OAAO,CAAC,CACN,aAAaZ,KADP,CAD8F,CAAtF,CAVH,QAUXK,KAVW,eAefS,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAoBV,KAApB,EACAC,QAAQ,CAACD,KAAK,CAACW,IAAP,CAAR,CAhBe,uDAAH,kBAART,CAAAA,QAAQ,0CAAd,CAmBF,mBACE,wCACA,WAAI,KAAK,CAAE,CAACU,KAAK,CAAC,KAAP,CAAaC,UAAU,CAAC,OAAxB,CAAgCC,SAAS,CAAC,MAA1C,CAAiDC,YAAY,CAAC,MAA9D,CAAX,2BADA,CAEGjB,KAAK,CAACkB,GAAN,CAAU,SAACC,IAAD,CAAQ,CACjB,mBACE,wCACD,aAAM,KAAK,CAAE,CAACC,QAAQ,CAAC,MAAV,CAAiBC,UAAU,CAAC,MAA5B,CAAb,UAAoDF,IAAI,CAACG,SAAzD,EADC,kBAC0E,aAAM,KAAK,CAAE,CAACF,QAAQ,CAAC,MAAV,CAAiBC,UAAU,CAAC,MAA5B,CAAb,UAAmDF,IAAI,CAACI,OAAxD,EAD1E,cACiJ,aADjJ,cACsJ,aADtJ,cAED,KAAC,cAAD,EAAgB,SAAS,CAAEnC,KAA3B,uBACA,MAAC,KAAD,EAAO,EAAE,CAAE,CAAEoC,QAAQ,CAAE,GAAZ,CAAX,CAA8B,aAAW,cAAzC,wBACE,KAAC,SAAD,wBACE,MAAC,QAAD,yBACE,KAAC,SAAD,uBADF,cAEE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,oBAFF,cAGE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,wBAHF,cAIE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,0BAJF,cAKE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,4BALF,cAME,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,wBANF,cAOE,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,wBAPF,GADF,EADF,CAYGtB,KAAK,CAACgB,GAAN,CAAU,SAACO,IAAD,CAAQ,CAChB,GAAGA,IAAI,CAACN,IAAL,EAAWA,IAAI,CAACG,SAAnB,CAA6B,CAC3B,mBACI,KAAC,SAAD,wBACG,MAAC,QAAD,EAET,EAAE,CAAE,CAAE,mCAAoC,CAAEI,MAAM,CAAE,CAAV,CAAtC,CAFK,wBAIR,KAAC,SAAD,EAAW,SAAS,CAAC,IAArB,CAA0B,KAAK,CAAC,KAAhC,UACED,IAAI,CAACE,QADP,EAJQ,cAOT,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,UAA0BF,IAAI,CAACG,MAA/B,EAPS,cAQT,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,UAA0BH,IAAI,CAAClB,SAA/B,EARS,cAST,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,UAA0BkB,IAAI,CAACI,WAA/B,EATS,cAUT,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,UAA0BJ,IAAI,CAACK,aAA/B,EAVS,cAWT,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,UAA0BL,IAAI,CAACM,SAA/B,EAXS,cAYT,KAAC,SAAD,EAAW,KAAK,CAAC,OAAjB,uBAAyB,yBAAKN,IAAI,CAACO,SAAV,GAAzB,EAZS,GACJP,IAAI,CAACQ,GADD,CADH,EADJ,CAgBQ,CAAC,CAlBb,CAZH,GADA,EAFC,GADF,CAmC2B,CApC5B,CAFH,cAuCC,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAE,CAACC,KAAK,CAAC,OAAP,CAAenB,UAAU,CAAC,OAA1B,CAA5B,CAAgE,OAAO,CAAE,kBAAI,CAACnB,OAAO,CAACuC,IAAR,CAAa,YAAb,EAA2B,CAAzG,CAA2G,KAAK,CAAC,MAAjH,CAAyH,EAAE,CAAC,YAA5H,EAvCD,GADF,CA0CC","sourcesContent":["import * as React from 'react';\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableHead from '@mui/material/TableHead';\nimport TableRow from '@mui/material/TableRow';\nimport Paper from '@mui/material/Paper';\nimport {useEffect,useState} from \"react\";\nimport { useHistory } from 'react-router';\nimport { useParams } from 'react-router';\nimport axios from 'axios';\n// function createData(name, calories, fat, carbs, protein) {\n//   return { name, calories, fat, carbs, protein };\n// }\n\n// const rows = [\n//   createData('Frozen yoghurt', 159, 6.0, 24, 4.0),\n//   createData('Ice cream sandwich', 237, 9.0, 37, 4.3),\n//   createData('Eclair', 262, 16.0, 24, 6.0),\n//   createData('Cupcake', 305, 3.7, 67, 4.3),\n//   createData('Gingerbread', 356, 16.0, 49, 3.9),\n// ];\n\nexport default function Bookings() {\n    var params = useParams();\n    var history = useHistory();\n    const token = localStorage.getItem(\"token\");\n    const [shows,setShows] = useState([]);\n    const [users,setUsers] = useState([]);\n    useEffect(()=>{\n       getUsers();\n    },[])\n    const getUsers = async()=>{\n      var id = params.id;\n      var movie_name = params.moviename;\n      var show_res = await axios.get(`https://bookmyshowback.herokuapp.com/show/getshows/${id}`,{\n        headers:{\n          'auth-token':token\n        }\n      });\n      console.log(\"res\",show_res);\n      setShows(show_res.data);\n      var users = await axios.get(`https://bookmyshowback.herokuapp.com/movies/getuserbookings/${movie_name}`,{\n        headers:{\n          'auth-token':token\n        }\n      });\n      console.log(\"users\",users);\n      setUsers(users.data);\n\n    }\n  return (\n    <>\n    <h1 style={{color:\"red\",marginLeft:\"300px\",marginTop:'30vh',marginBottom:\"20px\"}}>User Bookings</h1>\n      {shows.map((show)=>{\n        return(\n          <>\n         <span style={{fontSize:\"20px\",fontWeight:\"bold\",}}>{show.startTime}</span>-<span style={{fontSize:\"20px\",fontWeight:\"bold\"}}>{show.endTime}</span><br/><br/>\n         <TableContainer component={Paper}>\n         <Table sx={{ minWidth: 650 }} aria-label=\"simple table\">\n           <TableHead>\n             <TableRow>\n               <TableCell>UserName</TableCell>\n               <TableCell align=\"right\">Mobile</TableCell>\n               <TableCell align=\"right\">Movie Name</TableCell>\n               <TableCell align=\"right\">Booking Date</TableCell>\n               <TableCell align=\"right\">Movie Watchers</TableCell>\n               <TableCell align=\"right\">Ceat Names</TableCell>\n               <TableCell align=\"right\">Total Cost</TableCell>\n             </TableRow>\n           </TableHead>\n           {users.map((user)=>{\n              if(user.show==show.startTime){\n                return(\n                    <TableBody>\n                       <TableRow\n              key={user._id}\n              sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\n            > \n               <TableCell component=\"th\" scope=\"row\">\n                {user.username}\n              </TableCell>\n              <TableCell align=\"right\">{user.mobile}</TableCell>\n              <TableCell align=\"right\">{user.moviename}</TableCell>\n              <TableCell align=\"right\">{user.bookingdate}</TableCell>\n              <TableCell align=\"right\">{user.moviewatchers}</TableCell>\n              <TableCell align=\"right\">{user.ceatnames}</TableCell>\n              <TableCell align=\"right\"><b>${user.totalcost}</b></TableCell>\n            </TableRow> \n          </TableBody>)}})}\n     </Table></TableContainer></>)})}\n     <input type=\"button\" style={{width:\"200px\",marginLeft:\"300px\"}} onClick={()=>{history.push(\"/adminpage\")}} value=\"Back\"  id=\"con-select\" />\n     </>)\n  }\n"]},"metadata":{},"sourceType":"module"}